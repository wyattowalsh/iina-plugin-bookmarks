function e(e){return e&&e.__esModule?e.default:e}function t(e,t,s,a){Object.defineProperty(e,t,{get:s,set:a,enumerable:!0,configurable:!0})}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},r={},l=s.parcelRequire9a9a;null==l&&((l=function(e){if(e in a)return a[e].exports;if(e in r){var t=r[e];delete r[e];var s={id:e,exports:{}};return a[e]=s,t.call(s.exports,s,s.exports),s.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},s.parcelRequire9a9a=l);var i=l.register;i("8YcBG",function(s,a){t(s.exports,"default",()=>g);var r=l("3ruKn"),i=l("6r7ZQ"),c=l("YgFEM"),n=l("18qrn"),o=l("8muiM"),d=l("3sb15");let u={searchTerm:"",dateRange:{start:"",end:""},tags:[],sortBy:"createdAt",sortDirection:"desc",fileFilter:""};var g=({onFilterChange:t,availableTags:s=[],availableFiles:a=[],resultsCount:l,compact:g=!1,showAdvanced:m=!1,initialFilters:f={},viewId:h="default"})=>{let p=(0,r._)({},u,f),[v,S]=(0,d.usePersistentFilterState)(h,p),[x,b]=(0,n.useState)(m),[j,k]=(0,n.useState)(!1),[C,y]=(0,n.useState)(v.searchTerm),N=(0,o.default)(C,300),w=(0,n.useCallback)(e=>{let s=(0,r._)({},v,e);S(s),t(s)},[v,t,S]);e(n).useEffect(()=>{N!==v.searchTerm&&w({searchTerm:N})},[N,v.searchTerm,w]),e(n).useEffect(()=>{t(v)},[]);let P=(0,n.useCallback)(e=>{y(e.target.value)},[]),_=(0,n.useCallback)(e=>{let[t,s]=e.target.value.split("-");w({sortBy:t,sortDirection:s})},[w]),U=(0,n.useCallback)((e,t)=>{w({dateRange:(0,i._)((0,r._)({},v.dateRange),{[e]:t})})},[v.dateRange,w]),F=(0,n.useCallback)(e=>{w({tags:v.tags.includes(e)?v.tags.filter(t=>t!==e):[...v.tags,e]})},[v.tags,w]),R=(0,n.useCallback)(e=>{w({tags:v.tags.filter(t=>t!==e)})},[v.tags,w]),T=(0,n.useCallback)(e=>{w({fileFilter:e.target.value})},[w]),O=(0,n.useCallback)(()=>{S(u),y(""),t(u)},[t]),E=(0,n.useMemo)(()=>v.searchTerm||v.dateRange.start||v.dateRange.end||v.tags.length>0||v.fileFilter,[v]),A=`${v.sortBy}-${v.sortDirection}`;return(0,c.jsxs)("div",{className:`filter-container ${g?"compact":""}`,children:[(0,c.jsxs)("div",{className:"filter-row",children:[(0,c.jsx)("div",{className:"filter-group",children:(0,c.jsx)("input",{type:"text",className:`filter-input ${g?"compact":""}`,placeholder:"Search bookmarks...",value:C,onChange:P})}),(0,c.jsx)("div",{className:"filter-group",children:(0,c.jsxs)("select",{className:`filter-select ${g?"compact":""}`,value:A,onChange:_,children:[(0,c.jsx)("option",{value:"createdAt-desc",children:"Latest First"}),(0,c.jsx)("option",{value:"createdAt-asc",children:"Oldest First"}),(0,c.jsx)("option",{value:"title-asc",children:"Title A-Z"}),(0,c.jsx)("option",{value:"title-desc",children:"Title Z-A"}),(0,c.jsx)("option",{value:"timestamp-asc",children:"Time (Start)"}),(0,c.jsx)("option",{value:"timestamp-desc",children:"Time (End)"})]})}),a.length>0&&(0,c.jsx)("div",{className:"filter-group",children:(0,c.jsxs)("select",{className:`filter-select ${g?"compact":""}`,value:v.fileFilter,onChange:T,children:[(0,c.jsx)("option",{value:"",children:"All Files"}),a.map(e=>(0,c.jsx)("option",{value:e,children:e},e))]})}),s.length>0&&(0,c.jsx)("div",{className:"filter-group",children:(0,c.jsxs)("div",{className:"multi-select-dropdown",children:[(0,c.jsxs)("button",{className:`dropdown-toggle ${g?"compact":""}`,onClick:()=>k(!j),children:["Tags (",v.tags.length,")"]}),j&&(0,c.jsx)("div",{className:"dropdown-menu",children:s.map(e=>(0,c.jsxs)("div",{className:"dropdown-item",onClick:()=>F(e),children:[(0,c.jsx)("input",{type:"checkbox",checked:v.tags.includes(e),readOnly:!0}),(0,c.jsx)("span",{children:e})]},e))})]})})]}),v.tags.length>0&&(0,c.jsx)("div",{className:"filter-tags",children:v.tags.map(e=>(0,c.jsxs)("span",{className:"filter-tag",children:[e,(0,c.jsx)("span",{className:"remove-tag",onClick:()=>R(e),children:"×"})]},e))}),s.length>0&&(0,c.jsxs)("div",{className:"advanced-filter-panel",children:[(0,c.jsxs)("div",{className:"advanced-toggle",onClick:()=>b(!x),children:[(0,c.jsx)("span",{children:x?"▼":"▶"}),(0,c.jsx)("span",{children:"Advanced Filters"})]}),x&&(0,c.jsx)("div",{className:"advanced-content",children:(0,c.jsx)("div",{className:"filter-row",children:(0,c.jsxs)("div",{className:"filter-group",children:[(0,c.jsx)("label",{className:"filter-label",children:"Date Range"}),(0,c.jsxs)("div",{className:"date-range-picker",children:[(0,c.jsx)("input",{type:"date",value:v.dateRange.start,onChange:e=>U("start",e.target.value)}),(0,c.jsx)("span",{className:"date-separator",children:"to"}),(0,c.jsx)("input",{type:"date",value:v.dateRange.end,onChange:e=>U("end",e.target.value)})]})]})})})]}),(0,c.jsxs)("div",{className:"filter-row",children:[void 0!==l&&(0,c.jsxs)("div",{className:"filter-results-count",children:[l," bookmark",1!==l?"s":""," found"]}),E&&(0,c.jsx)("button",{className:"filter-clear",onClick:O,children:"Clear all filters"})]})]})}}),i("3sb15",function(e,s){t(e.exports,"usePersistentFilterState",()=>r);var a=l("18qrn");function r(e,t){var s=`iina-bookmarks-filters-${e}`;let[r,l]=(0,a.useState)(()=>{try{let e=window.localStorage.getItem(s);return e?JSON.parse(e):t}catch(e){return console.warn(`Error reading localStorage key "${s}":`,e),t}});return[r,e=>{try{l(e),window.localStorage.setItem(s,JSON.stringify(e))}catch(e){console.warn(`Error setting localStorage key "${s}":`,e)}}]}}),i("cEMf7",function(e,s){t(e.exports,"default",()=>n);var a=l("3ruKn"),r=l("6r7ZQ"),i=l("18qrn");let c="bookmark-filter-history";var n=()=>{let[e,t]=(0,i.useState)({recentSearches:[],customPresets:[],filterUsageStats:{}});(0,i.useEffect)(()=>{try{let e=localStorage.getItem(c);if(e){let s=JSON.parse(e);t({recentSearches:s.recentSearches||[],customPresets:s.customPresets||[],filterUsageStats:s.filterUsageStats||{}})}}catch(e){console.error("Error loading filter history:",e)}},[]);let s=(0,i.useCallback)(e=>{try{localStorage.setItem(c,JSON.stringify(e)),t(e)}catch(e){console.error("Error saving filter history:",e)}},[]),l=(0,i.useCallback)(t=>{if(!t.trim())return;let l=t.trim(),i=[l,...e.recentSearches.filter(e=>e!==l)].slice(0,10);s((0,r._)((0,a._)({},e),{recentSearches:i}))},[e,s]),n=(0,i.useCallback)(()=>{s((0,r._)((0,a._)({},e),{recentSearches:[]}))},[e,s]),o=(0,i.useCallback)((t,l,i)=>{let c={id:`custom-${Date.now()}`,name:t.trim(),description:l.trim(),filters:{searchTerm:i.searchTerm,dateRange:i.dateRange,tags:[...i.tags],sortBy:i.sortBy,sortDirection:i.sortDirection,fileFilter:i.fileFilter},createdAt:new Date().toISOString(),usageCount:0},n=[c,...e.customPresets.filter(e=>e.name!==t.trim())].slice(0,20);return s((0,r._)((0,a._)({},e),{customPresets:n})),c.id},[e,s]),d=(0,i.useCallback)(t=>{let l=e.customPresets.filter(e=>e.id!==t);s((0,r._)((0,a._)({},e),{customPresets:l}))},[e,s]),u=(0,i.useCallback)(t=>{let l=e.customPresets.map(e=>e.id===t?(0,r._)((0,a._)({},e),{usageCount:e.usageCount+1}):e);s((0,r._)((0,a._)({},e),{customPresets:l}))},[e,s]),g=(0,i.useCallback)(t=>{let l=(0,r._)((0,a._)({},e.filterUsageStats),{[t]:(e.filterUsageStats[t]||0)+1});s((0,r._)((0,a._)({},e),{filterUsageStats:l}))},[e,s]),m=(0,i.useCallback)(()=>Object.entries(e.filterUsageStats).sort(([,e],[,t])=>t-e).slice(0,5).map(([e,t])=>({filter:e,count:t})),[e.filterUsageStats]),f=(0,i.useCallback)(()=>[...e.customPresets].sort((e,t)=>t.usageCount-e.usageCount).slice(0,5),[e.customPresets]),h=(0,i.useCallback)(()=>{let t=new Blob([JSON.stringify((0,r._)((0,a._)({},e),{exportedAt:new Date().toISOString(),version:"1.0"}),null,2)],{type:"application/json"}),s=URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download=`bookmark-filter-history-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)},[e]),p=(0,i.useCallback)(t=>new Promise(r=>{let l=new FileReader;l.onload=t=>{try{var l;let i=JSON.parse(null==(l=t.target)?void 0:l.result);if(i.recentSearches&&i.customPresets){let t={recentSearches:[...e.recentSearches,...i.recentSearches||[]].slice(0,10),customPresets:[...e.customPresets,...i.customPresets||[]].slice(0,20),filterUsageStats:(0,a._)({},e.filterUsageStats,i.filterUsageStats||{})};s(t),r(!0)}else r(!1)}catch(e){console.error("Error importing filter history:",e),r(!1)}},l.readAsText(t)}),[e,s]),v=(0,i.useCallback)(()=>{s({recentSearches:[],customPresets:[],filterUsageStats:{}})},[s]);return{recentSearches:e.recentSearches,customPresets:e.customPresets,filterUsageStats:e.filterUsageStats,addRecentSearch:l,clearRecentSearches:n,saveFilterPreset:o,deleteFilterPreset:d,incrementPresetUsage:u,trackFilterUsage:g,getMostUsedFilters:m,getPopularPresets:f,exportHistory:h,importHistory:p,clearAllHistory:v}}});
//# sourceMappingURL=window.bbe6bed8.js.map
