!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},s={},a=e.parcelRequire9a9a;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in s){var a=s[e];delete s[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){s[e]=t},e.parcelRequire9a9a=a),a.register;var n=a("jr3WH");a("joq15");var i=a("fEatv"),r=a("gDbdG"),l=a("78RNE"),c=a("hiL4o"),n=a("jr3WH"),o=a("joq15"),d=a("c04QX"),u=a("blyWw"),c=a("hiL4o"),h=a("8IRNY"),n=a("jr3WH"),o=a("joq15"),m=[{id:"recent",name:"Recent",description:"Bookmarks created today",filters:{dateRange:{start:new Date().toISOString().split("T")[0],end:""},sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDD52"},{id:"this-week",name:"This Week",description:"Bookmarks from the past 7 days",filters:{dateRange:{start:new Date(Date.now()-6048e5).toISOString().split("T")[0],end:""},sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDCC5"},{id:"untagged",name:"Untagged",description:"Bookmarks without any tags",filters:{searchTerm:"",tags:[],sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83C\uDFF7️"},{id:"favorites",name:"Favorites",description:"Bookmarks with favorite tag",filters:{tags:["favorite"],sortBy:"createdAt",sortDirection:"desc"},icon:"⭐"},{id:"no-description",name:"Need Description",description:"Bookmarks missing descriptions",filters:{searchTerm:"",sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDCDD"}],p=function(e){var t=e.onApplyPreset,s=e.onSaveCurrentAsPreset,a=e.currentFilters,i=e.customPresets,r=e.recentSearches,l=void 0===r?[]:r,d=e.onClearHistory,u=e.className,p=(0,c._)((0,o.useState)(!1),2),f=p[0],v=p[1],x=(0,c._)((0,o.useState)(""),2),g=x[0],j=x[1],N=(0,c._)((0,o.useState)(""),2),k=N[0],D=N[1],y=(0,c._)((0,o.useState)("presets"),2),b=y[0],C=y[1],S=(0,h._)(m).concat((0,h._)(void 0===i?[]:i)),T=(0,o.useCallback)(function(e){t(e.filters)},[t]),w=(0,o.useCallback)(function(){g.trim()&&(s(g.trim(),k.trim()),j(""),D(""),v(!1))},[g,k,s]),_=(0,o.useCallback)(function(e){var t=e.filters;return(void 0===t.searchTerm||t.searchTerm===a.searchTerm)&&(!t.sortBy||t.sortBy===a.sortBy)&&(!t.sortDirection||t.sortDirection===a.sortDirection)&&(!t.tags||JSON.stringify(t.tags)===JSON.stringify(a.tags))&&(void 0===t.fileFilter||t.fileFilter===a.fileFilter)},[a]),A=(0,o.useCallback)(function(){return""!==a.searchTerm||""!==a.dateRange.start||""!==a.dateRange.end||a.tags.length>0||""!==a.fileFilter||"createdAt"!==a.sortBy||"desc"!==a.sortDirection},[a]),B=(0,o.useCallback)(function(e){t({searchTerm:e})},[t]);return(0,n.jsxs)("div",{className:`filter-presets ${void 0===u?"":u}`,children:[(0,n.jsxs)("div",{className:"presets-section",children:[(0,n.jsxs)("div",{className:"section-header",onClick:function(){return C("presets"===b?null:"presets")},children:[(0,n.jsx)("span",{className:"section-icon",children:"presets"===b?"▼":"▶"}),(0,n.jsx)("span",{className:"section-title",children:"Quick Filters"}),(0,n.jsxs)("span",{className:"section-count",children:["(",S.length,")"]})]}),"presets"===b&&(0,n.jsxs)("div",{className:"presets-content",children:[(0,n.jsx)("div",{className:"preset-grid",children:S.map(function(e){return(0,n.jsxs)("button",{className:`preset-button ${_(e)?"active":""}`,onClick:function(){return T(e)},title:e.description,children:[e.icon&&(0,n.jsx)("span",{className:"preset-icon",children:e.icon}),(0,n.jsx)("span",{className:"preset-name",children:e.name})]},e.id)})}),A()&&(0,n.jsx)("div",{className:"save-preset-section",children:f?(0,n.jsxs)("div",{className:"save-preset-dialog",children:[(0,n.jsx)("input",{type:"text",placeholder:"Preset name",value:g,onChange:function(e){return j(e.target.value)},className:"preset-name-input"}),(0,n.jsx)("input",{type:"text",placeholder:"Description (optional)",value:k,onChange:function(e){return D(e.target.value)},className:"preset-description-input"}),(0,n.jsxs)("div",{className:"dialog-actions",children:[(0,n.jsx)("button",{onClick:w,className:"save-btn",disabled:!g.trim(),children:"Save"}),(0,n.jsx)("button",{onClick:function(){return v(!1)},className:"cancel-btn",children:"Cancel"})]})]}):(0,n.jsx)("button",{className:"save-preset-trigger",onClick:function(){return v(!0)},children:"\uD83D\uDCBE Save Current Filters as Preset"})})]})]}),l.length>0&&(0,n.jsxs)("div",{className:"history-section",children:[(0,n.jsxs)("div",{className:"section-header",onClick:function(){return C("history"===b?null:"history")},children:[(0,n.jsx)("span",{className:"section-icon",children:"history"===b?"▼":"▶"}),(0,n.jsx)("span",{className:"section-title",children:"Recent Searches"}),(0,n.jsxs)("span",{className:"section-count",children:["(",l.length,")"]})]}),"history"===b&&(0,n.jsxs)("div",{className:"history-content",children:[(0,n.jsx)("div",{className:"history-list",children:l.slice(0,5).map(function(e,t){return(0,n.jsxs)("button",{className:"history-item",onClick:function(){return B(e)},title:`Apply search: ${e}`,children:[(0,n.jsx)("span",{className:"history-icon",children:"\uD83D\uDD0D"}),(0,n.jsx)("span",{className:"history-text",children:e})]},t)})}),d&&(0,n.jsx)("button",{className:"clear-history-btn",onClick:d,children:"\uD83D\uDDD1️ Clear History"})]})]})]})},f=a("7yYUG"),v=a("3gg67"),x=a("bfvSq"),g=document.getElementById("app");g&&(0,i.createRoot)(g).render((0,n.jsx)(function(){var e=(0,c._)((0,o.useState)([]),2),t=e[0],s=e[1],a=(0,c._)((0,o.useState)(null),2),i=a[0],h=a[1],m=(0,c._)((0,o.useState)(!1),2),g=m[0],j=m[1],N=(0,c._)((0,o.useState)(""),2),k=N[0],D=N[1],y=(0,c._)((0,o.useState)(""),2),b=y[0],C=y[1],S=(0,c._)((0,o.useState)(void 0),2),T=(S[0],S[1]),w=(0,c._)((0,o.useState)({searchTerm:"",dateRange:{start:"",end:""},tags:[],sortBy:"createdAt",sortDirection:"desc",fileFilter:""}),2),_=w[0],A=w[1],B=(0,c._)((0,o.useState)(),2),F=B[0],R=B[1],E=(0,c._)((0,o.useState)(!1),2),O=E[0],P=E[1],M=window,L=(0,v.default)({bookmarks:t,filters:_,parsedQuery:O?F:void 0}),U=L.filteredBookmarks,K=L.resultsCount,H=L.availableFiles,I=L.availableTags,$=L.analytics,q=(0,x.default)(),J=q.recentSearches,W=q.customPresets,Q=q.addRecentSearch,Y=q.clearRecentSearches,G=q.saveFilterPreset;q.deleteFilterPreset,q.incrementPresetUsage,(0,o.useEffect)(function(){var e,t,a=function(e){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){return}(null==t?void 0:t.type)==="BOOKMARKS_UPDATED"&&t.data?(s(t.data),i&&!t.data.find(function(e){return e.id===i.id})&&(h(null),j(!1))):(null==t?void 0:t.type)==="CURRENT_FILE_PATH"&&t.data&&T(t.data)};return(null==(e=M.iina)?void 0:e.onMessage)?M.iina.onMessage("message",a):window.addEventListener("message",a),(null==(t=M.iina)?void 0:t.postMessage)&&(M.iina.postMessage("UI_READY",{uiType:"window"}),M.iina.postMessage("REQUEST_FILE_PATH")),function(){var e;(null==(e=M.iina)?void 0:e.onMessage)||window.removeEventListener("message",a)}},[i]);var V=function(e){var t,s;null==(s=M.iina)||null==(t=s.postMessage)||t.call(s,"DELETE_BOOKMARK",{id:e})},X=function(e){var t,s;null==(s=M.iina)||null==(t=s.postMessage)||t.call(s,"JUMP_TO_BOOKMARK",{id:e})},z=function(e){h(e),D(e.title),C(e.description||""),j(!0)},Z=function(e){return new Date(1e3*e).toISOString().substr(11,8)};return(0,n.jsxs)("div",{className:"bookmark-window",children:[(0,n.jsxs)("div",{className:"window-header",children:[(0,n.jsx)("h1",{children:"Manage All Bookmarks"}),(0,n.jsx)("div",{className:"header-actions",children:(0,n.jsx)("button",{onClick:function(){var e,t;null==(t=M.iina)||null==(e=t.postMessage)||e.call(t,"ADD_BOOKMARK",{title:`New Bookmark ${new Date().toLocaleTimeString()}`,timestamp:null,description:"Added from bookmark manager window"})},className:"add-bookmark-btn",children:"Add Bookmark to Current Video"})})]}),(0,n.jsx)(p,{onApplyPreset:function(e){A(function(t){return(0,r._)({},t,e)})},onSaveCurrentAsPreset:function(e,t){G(e,t,_)},currentFilters:_,customPresets:W,recentSearches:J,onClearHistory:Y}),(0,n.jsxs)("div",{className:"filter-row",children:[(0,n.jsxs)("div",{className:"advanced-search-toggle",onClick:function(){return P(!O)},children:[(0,n.jsx)("span",{className:`toggle-icon ${O?"expanded":""}`,children:"▶"}),(0,n.jsx)("span",{children:"Advanced Search"})]}),$.hasActiveFilters&&(0,n.jsxs)("div",{className:"filter-analytics",children:[(0,n.jsxs)("div",{className:"analytics-item",children:[(0,n.jsx)("span",{className:"analytics-icon",children:"\uD83D\uDCCA"}),(0,n.jsx)("span",{className:"analytics-value",children:$.filteredCount}),(0,n.jsxs)("span",{children:["of ",$.totalBookmarks]})]}),$.reductionPercentage>0&&(0,n.jsxs)("div",{className:`analytics-item reduction-percentage ${$.reductionPercentage>75?"high-reduction":""}`,children:[(0,n.jsx)("span",{className:"analytics-icon",children:"\uD83D\uDCC9"}),(0,n.jsxs)("span",{className:"analytics-value",children:[$.reductionPercentage,"%"]}),(0,n.jsx)("span",{children:"filtered out"})]})]})]}),O?(0,n.jsx)(u.default,{onSearchChange:function(e,t){R(t),A(function(t){return(0,l._)((0,r._)({},t),{searchTerm:e})}),e.trim()&&Q(e)},availableTags:I,availableFiles:H,recentSearches:J}):(0,n.jsx)(d.default,{onFilterChange:A,availableTags:I,availableFiles:H,resultsCount:K,showAdvanced:!0,initialFilters:_}),(0,n.jsxs)("div",{className:"content-area",children:[(0,n.jsx)("div",{className:"bookmark-list-panel",children:0===U.length?(0,n.jsx)("p",{className:"empty-state-text",children:"No bookmarks match your current filters."}):U.map(function(e){return(0,n.jsxs)("div",{className:`bookmark-entry ${(null==i?void 0:i.id)===e.id?"selected":""}`,onClick:function(){return h(e)},children:[(0,n.jsx)("h4",{children:(0,n.jsx)(f.default,{text:e.title,searchTerms:_.searchTerm,caseSensitive:!1})}),(0,n.jsxs)("p",{className:"filepath",title:e.filepath,children:[e.filepath.split("/").pop()," (",Z(e.timestamp),")"]}),e.tags&&e.tags.length>0&&(0,n.jsx)("div",{className:"bookmark-tags-small",children:e.tags.map(function(e){return(0,n.jsx)("span",{className:"bookmark-tag-small",children:e},e)})}),(0,n.jsxs)("p",{className:"created-date-small",children:["Added: ",new Date(e.createdAt).toLocaleDateString()]})]},e.id)})}),i&&(0,n.jsx)("div",{className:"bookmark-detail-panel",children:g?(0,n.jsxs)("div",{className:"edit-form",children:[(0,n.jsx)("h3",{children:"Edit Bookmark"}),(0,n.jsx)("input",{type:"text",value:k,onChange:function(e){return D(e.target.value)},placeholder:"Title"}),(0,n.jsx)("textarea",{value:b,onChange:function(e){return C(e.target.value)},placeholder:"Description"}),(0,n.jsxs)("div",{className:"edit-actions",children:[(0,n.jsx)("button",{onClick:function(){if(i){var e,t;null==(t=M.iina)||null==(e=t.postMessage)||e.call(t,"UPDATE_BOOKMARK",{id:i.id,data:{title:k,description:b}}),j(!1),h(function(e){return e?(0,l._)((0,r._)({},e),{title:k,description:b}):null}),s(function(e){return e.map(function(e){return e.id===i.id?(0,l._)((0,r._)({},e),{title:k,description:b}):e})})}},className:"save-btn",children:"Save Changes"}),(0,n.jsx)("button",{onClick:function(){return j(!1)},className:"cancel-btn",children:"Cancel"})]})]}):(0,n.jsxs)("div",{className:"details-view",children:[(0,n.jsx)("h3",{children:(0,n.jsx)(f.default,{text:i.title,searchTerms:_.searchTerm,caseSensitive:!1})}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"File:"})," ",(0,n.jsx)("span",{title:i.filepath,children:i.filepath})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Time:"})," ",Z(i.timestamp)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Description:"}),(0,n.jsx)(f.default,{text:i.description||"N/A",searchTerms:_.searchTerm,caseSensitive:!1})]}),i.tags&&i.tags.length>0&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Tags:"})," ",i.tags.join(", ")]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Created:"})," ",new Date(i.createdAt).toLocaleString()]}),(0,n.jsxs)("div",{className:"detail-actions",children:[(0,n.jsx)("button",{onClick:function(){return X(i.id)},className:"jump-btn",children:"Jump To"}),(0,n.jsx)("button",{onClick:function(){return z(i)},className:"edit-btn",children:"Edit"}),(0,n.jsx)("button",{onClick:function(){return V(i.id)},className:"delete-btn-detail",children:"Delete"})]})]})}),!i&&U.length>0&&(0,n.jsx)("div",{className:"bookmark-detail-panel placeholder-panel",children:(0,n.jsx)("p",{children:"Select a bookmark from the list to view or edit its details."})})]})]})},{}))}();
//# sourceMappingURL=window.d74a44ee.js.map
