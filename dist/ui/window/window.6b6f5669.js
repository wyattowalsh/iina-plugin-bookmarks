!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},s={},a=e.parcelRequire9a9a;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in s){var a=s[e];delete s[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){s[e]=t},e.parcelRequire9a9a=a),a.register;var n=a("jr3WH");a("joq15");var i=a("fEatv"),r=a("gDbdG"),l=a("78RNE"),c=a("hiL4o"),n=a("jr3WH"),o=a("joq15"),d=a("c04QX"),u=a("blyWw"),c=a("hiL4o"),h=a("8IRNY"),n=a("jr3WH"),o=a("joq15"),m=[{id:"recent",name:"Recent",description:"Bookmarks created today",filters:{dateRange:{start:new Date().toISOString().split("T")[0],end:""},sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDD52"},{id:"this-week",name:"This Week",description:"Bookmarks from the past 7 days",filters:{dateRange:{start:new Date(Date.now()-6048e5).toISOString().split("T")[0],end:""},sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDCC5"},{id:"untagged",name:"Untagged",description:"Bookmarks without any tags",filters:{searchTerm:"",tags:[],sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83C\uDFF7️"},{id:"favorites",name:"Favorites",description:"Bookmarks with favorite tag",filters:{tags:["favorite"],sortBy:"createdAt",sortDirection:"desc"},icon:"⭐"},{id:"no-description",name:"Need Description",description:"Bookmarks missing descriptions",filters:{searchTerm:"",sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDCDD"}],p=function(e){var t=e.onApplyPreset,s=e.onSaveCurrentAsPreset,a=e.currentFilters,i=e.customPresets,r=e.recentSearches,l=void 0===r?[]:r,d=e.onClearHistory,u=e.className,p=(0,c._)((0,o.useState)(!1),2),g=p[0],f=p[1],v=(0,c._)((0,o.useState)(""),2),x=v[0],j=v[1],N=(0,c._)((0,o.useState)(""),2),k=N[0],b=N[1],D=(0,c._)((0,o.useState)("presets"),2),y=D[0],C=D[1],S=(0,h._)(m).concat((0,h._)(void 0===i?[]:i)),T=(0,o.useCallback)(function(e){t(e.filters)},[t]),w=(0,o.useCallback)(function(){x.trim()&&(s(x.trim(),k.trim()),j(""),b(""),f(!1))},[x,k,s]),_=(0,o.useCallback)(function(e){var t=e.filters;return(void 0===t.searchTerm||t.searchTerm===a.searchTerm)&&(!t.sortBy||t.sortBy===a.sortBy)&&(!t.sortDirection||t.sortDirection===a.sortDirection)&&(!t.tags||JSON.stringify(t.tags)===JSON.stringify(a.tags))&&(void 0===t.fileFilter||t.fileFilter===a.fileFilter)},[a]),A=(0,o.useCallback)(function(){return""!==a.searchTerm||""!==a.dateRange.start||""!==a.dateRange.end||a.tags.length>0||""!==a.fileFilter||"createdAt"!==a.sortBy||"desc"!==a.sortDirection},[a]),B=(0,o.useCallback)(function(e){t({searchTerm:e})},[t]);return(0,n.jsxs)("div",{className:`filter-presets ${void 0===u?"":u}`,children:[(0,n.jsxs)("div",{className:"presets-section",children:[(0,n.jsxs)("div",{className:"section-header",onClick:function(){return C("presets"===y?null:"presets")},children:[(0,n.jsx)("span",{className:"section-icon",children:"presets"===y?"▼":"▶"}),(0,n.jsx)("span",{className:"section-title",children:"Quick Filters"}),(0,n.jsxs)("span",{className:"section-count",children:["(",S.length,")"]})]}),"presets"===y&&(0,n.jsxs)("div",{className:"presets-content",children:[(0,n.jsx)("div",{className:"preset-grid",children:S.map(function(e){return(0,n.jsxs)("button",{className:`preset-button ${_(e)?"active":""}`,onClick:function(){return T(e)},title:e.description,children:[e.icon&&(0,n.jsx)("span",{className:"preset-icon",children:e.icon}),(0,n.jsx)("span",{className:"preset-name",children:e.name})]},e.id)})}),A()&&(0,n.jsx)("div",{className:"save-preset-section",children:g?(0,n.jsxs)("div",{className:"save-preset-dialog",children:[(0,n.jsx)("input",{type:"text",placeholder:"Preset name",value:x,onChange:function(e){return j(e.target.value)},className:"preset-name-input"}),(0,n.jsx)("input",{type:"text",placeholder:"Description (optional)",value:k,onChange:function(e){return b(e.target.value)},className:"preset-description-input"}),(0,n.jsxs)("div",{className:"dialog-actions",children:[(0,n.jsx)("button",{onClick:w,className:"save-btn",disabled:!x.trim(),children:"Save"}),(0,n.jsx)("button",{onClick:function(){return f(!1)},className:"cancel-btn",children:"Cancel"})]})]}):(0,n.jsx)("button",{className:"save-preset-trigger",onClick:function(){return f(!0)},children:"\uD83D\uDCBE Save Current Filters as Preset"})})]})]}),l.length>0&&(0,n.jsxs)("div",{className:"history-section",children:[(0,n.jsxs)("div",{className:"section-header",onClick:function(){return C("history"===y?null:"history")},children:[(0,n.jsx)("span",{className:"section-icon",children:"history"===y?"▼":"▶"}),(0,n.jsx)("span",{className:"section-title",children:"Recent Searches"}),(0,n.jsxs)("span",{className:"section-count",children:["(",l.length,")"]})]}),"history"===y&&(0,n.jsxs)("div",{className:"history-content",children:[(0,n.jsx)("div",{className:"history-list",children:l.slice(0,5).map(function(e,t){return(0,n.jsxs)("button",{className:"history-item",onClick:function(){return B(e)},title:`Apply search: ${e}`,children:[(0,n.jsx)("span",{className:"history-icon",children:"\uD83D\uDD0D"}),(0,n.jsx)("span",{className:"history-text",children:e})]},t)})}),d&&(0,n.jsx)("button",{className:"clear-history-btn",onClick:d,children:"\uD83D\uDDD1️ Clear History"})]})]})]})},g=a("7yYUG"),c=a("hiL4o"),h=a("8IRNY"),n=a("jr3WH"),o=a("joq15"),f=function(e){var t=e.tags,s=e.onTagsChange,a=e.placeholder,i=e.availableTags,r=e.maxTags,l=void 0===r?10:r,d=e.disabled,u=void 0!==d&&d,m=e.className,p=(0,c._)((0,o.useState)(""),2),g=p[0],f=p[1],v=(0,c._)((0,o.useState)(!1),2),x=v[0],j=v[1],N=(0,o.useRef)(null),k=(void 0===i?[]:i).filter(function(e){return!t.includes(e)&&e.toLowerCase().includes(g.toLowerCase())}),b=(0,o.useCallback)(function(e){var a=e.trim();a&&!t.includes(a)&&t.length<l&&(s((0,h._)(t).concat([a])),f(""),j(!1))},[t,s,l]),D=(0,o.useCallback)(function(e){s(t.filter(function(t){return t!==e}))},[t,s]),y=(0,o.useCallback)(function(e){var t=e.target.value;f(t),j(t.length>0&&k.length>0)},[k.length]),C=(0,o.useCallback)(function(e){"Enter"===e.key||","===e.key?(e.preventDefault(),g.trim()&&b(g)):"Backspace"===e.key&&!g&&t.length>0?D(t[t.length-1]):"Escape"===e.key&&(j(!1),f(""))},[g,b,D,t]),S=(0,o.useCallback)(function(e){var t;b(e),null==(t=N.current)||t.focus()},[b]),T=(0,o.useCallback)(function(){g&&k.length>0&&j(!0)},[g,k.length]),w=(0,o.useCallback)(function(){setTimeout(function(){return j(!1)},150)},[]);return(0,n.jsxs)("div",{className:`tag-input-container ${void 0===m?"":m}`,children:[(0,n.jsxs)("div",{className:"tag-input-field",children:[t.map(function(e){return(0,n.jsxs)("span",{className:"tag-chip",children:[(0,n.jsx)("span",{className:"tag-text",children:e}),!u&&(0,n.jsx)("button",{type:"button",className:"tag-remove",onClick:function(){return D(e)},"aria-label":`Remove tag ${e}`,children:"×"})]},e)}),!u&&t.length<l&&(0,n.jsx)("input",{ref:N,type:"text",value:g,onChange:y,onKeyDown:C,onFocus:T,onBlur:w,placeholder:0===t.length?void 0===a?"Add tags...":a:"",className:"tag-input"})]}),x&&k.length>0&&(0,n.jsx)("div",{className:"tag-suggestions",children:k.slice(0,5).map(function(e){return(0,n.jsx)("button",{type:"button",className:"tag-suggestion",onClick:function(){return S(e)},children:e},e)})}),t.length>=l&&(0,n.jsxs)("div",{className:"tag-limit-message",children:["Maximum ",l," tags allowed"]})]})},v=a("3gg67"),x=a("bfvSq"),j=document.getElementById("app");j&&(0,i.createRoot)(j).render((0,n.jsx)(function(){var e=(0,c._)((0,o.useState)([]),2),t=e[0],s=e[1],a=(0,c._)((0,o.useState)(null),2),i=a[0],h=a[1],m=(0,c._)((0,o.useState)(!1),2),j=m[0],N=m[1],k=(0,c._)((0,o.useState)(""),2),b=k[0],D=k[1],y=(0,c._)((0,o.useState)(""),2),C=y[0],S=y[1],T=(0,c._)((0,o.useState)([]),2),w=T[0],_=T[1],A=(0,c._)((0,o.useState)(void 0),2),B=(A[0],A[1]),R=(0,c._)((0,o.useState)({searchTerm:"",dateRange:{start:"",end:""},tags:[],sortBy:"createdAt",sortDirection:"desc",fileFilter:""}),2),F=R[0],E=R[1],O=(0,c._)((0,o.useState)(),2),P=O[0],M=O[1],L=(0,c._)((0,o.useState)(!1),2),K=L[0],U=L[1],H=window,I=(0,v.default)({bookmarks:t,filters:F,parsedQuery:K?P:void 0}),$=I.filteredBookmarks,q=I.resultsCount,W=I.availableFiles,J=I.availableTags,Q=I.analytics,Y=(0,x.default)(),G=Y.recentSearches,V=Y.customPresets,X=Y.addRecentSearch,z=Y.clearRecentSearches,Z=Y.saveFilterPreset;Y.deleteFilterPreset,Y.incrementPresetUsage,(0,o.useEffect)(function(){var e,t,a=function(e){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){return}(null==t?void 0:t.type)==="BOOKMARKS_UPDATED"&&t.data?(s(t.data),i&&!t.data.find(function(e){return e.id===i.id})&&(h(null),N(!1))):(null==t?void 0:t.type)==="CURRENT_FILE_PATH"&&t.data&&B(t.data)};return(null==(e=H.iina)?void 0:e.onMessage)?H.iina.onMessage("message",a):window.addEventListener("message",a),(null==(t=H.iina)?void 0:t.postMessage)&&(H.iina.postMessage("UI_READY",{uiType:"window"}),H.iina.postMessage("REQUEST_FILE_PATH")),function(){var e;(null==(e=H.iina)?void 0:e.onMessage)||window.removeEventListener("message",a)}},[i]);var ee=function(e){var t,s;null==(s=H.iina)||null==(t=s.postMessage)||t.call(s,"DELETE_BOOKMARK",{id:e})},et=function(e){var t,s;null==(s=H.iina)||null==(t=s.postMessage)||t.call(s,"JUMP_TO_BOOKMARK",{id:e})},es=function(e){h(e),D(e.title),S(e.description||""),_(e.tags||[]),N(!0)},ea=function(e){return new Date(1e3*e).toISOString().substr(11,8)};return(0,n.jsxs)("div",{className:"bookmark-window",children:[(0,n.jsxs)("div",{className:"window-header",children:[(0,n.jsx)("h1",{children:"Manage All Bookmarks"}),(0,n.jsx)("div",{className:"header-actions",children:(0,n.jsx)("button",{onClick:function(){var e,t;null==(t=H.iina)||null==(e=t.postMessage)||e.call(t,"ADD_BOOKMARK",{title:`New Bookmark ${new Date().toLocaleTimeString()}`,timestamp:null,description:"Added from bookmark manager window"})},className:"add-bookmark-btn",children:"Add Bookmark to Current Video"})})]}),(0,n.jsx)(p,{onApplyPreset:function(e){E(function(t){return(0,r._)({},t,e)})},onSaveCurrentAsPreset:function(e,t){Z(e,t,F)},currentFilters:F,customPresets:V,recentSearches:G,onClearHistory:z}),(0,n.jsxs)("div",{className:"filter-row",children:[(0,n.jsxs)("div",{className:"advanced-search-toggle",onClick:function(){return U(!K)},children:[(0,n.jsx)("span",{className:`toggle-icon ${K?"expanded":""}`,children:"▶"}),(0,n.jsx)("span",{children:"Advanced Search"})]}),Q.hasActiveFilters&&(0,n.jsxs)("div",{className:"filter-analytics",children:[(0,n.jsxs)("div",{className:"analytics-item",children:[(0,n.jsx)("span",{className:"analytics-icon",children:"\uD83D\uDCCA"}),(0,n.jsx)("span",{className:"analytics-value",children:Q.filteredCount}),(0,n.jsxs)("span",{children:["of ",Q.totalBookmarks]})]}),Q.reductionPercentage>0&&(0,n.jsxs)("div",{className:`analytics-item reduction-percentage ${Q.reductionPercentage>75?"high-reduction":""}`,children:[(0,n.jsx)("span",{className:"analytics-icon",children:"\uD83D\uDCC9"}),(0,n.jsxs)("span",{className:"analytics-value",children:[Q.reductionPercentage,"%"]}),(0,n.jsx)("span",{children:"filtered out"})]})]})]}),K?(0,n.jsx)(u.default,{onSearchChange:function(e,t){M(t),E(function(t){return(0,l._)((0,r._)({},t),{searchTerm:e})}),e.trim()&&X(e)},availableTags:J,availableFiles:W,recentSearches:G}):(0,n.jsx)(d.default,{onFilterChange:E,availableTags:J,availableFiles:W,resultsCount:q,showAdvanced:!0,initialFilters:F}),(0,n.jsxs)("div",{className:"content-area",children:[(0,n.jsx)("div",{className:"bookmark-list-panel",children:0===$.length?(0,n.jsx)("p",{className:"empty-state-text",children:"No bookmarks match your current filters."}):$.map(function(e){return(0,n.jsxs)("div",{className:`bookmark-entry ${(null==i?void 0:i.id)===e.id?"selected":""}`,onClick:function(){return h(e)},children:[(0,n.jsx)("h4",{children:(0,n.jsx)(g.default,{text:e.title,searchTerms:F.searchTerm,caseSensitive:!1})}),(0,n.jsxs)("p",{className:"filepath",title:e.filepath,children:[e.filepath.split("/").pop()," (",ea(e.timestamp),")"]}),e.tags&&e.tags.length>0&&(0,n.jsx)("div",{className:"bookmark-tags-small",children:e.tags.map(function(e){return(0,n.jsx)("span",{className:"bookmark-tag-small",children:e},e)})}),(0,n.jsxs)("p",{className:"created-date-small",children:["Added: ",new Date(e.createdAt).toLocaleDateString()]})]},e.id)})}),i&&(0,n.jsx)("div",{className:"bookmark-detail-panel",children:j?(0,n.jsxs)("div",{className:"edit-form",children:[(0,n.jsx)("h3",{children:"Edit Bookmark"}),(0,n.jsx)("input",{type:"text",value:b,onChange:function(e){return D(e.target.value)},placeholder:"Title"}),(0,n.jsx)("textarea",{value:C,onChange:function(e){return S(e.target.value)},placeholder:"Description"}),(0,n.jsx)(f,{tags:w,onTagsChange:_,availableTags:J}),(0,n.jsxs)("div",{className:"edit-actions",children:[(0,n.jsx)("button",{onClick:function(){if(i){var e,t;null==(t=H.iina)||null==(e=t.postMessage)||e.call(t,"UPDATE_BOOKMARK",{id:i.id,data:{title:b,description:C,tags:w}}),N(!1),h(function(e){return e?(0,l._)((0,r._)({},e),{title:b,description:C,tags:w}):null}),s(function(e){return e.map(function(e){return e.id===i.id?(0,l._)((0,r._)({},e),{title:b,description:C,tags:w}):e})})}},className:"save-btn",children:"Save Changes"}),(0,n.jsx)("button",{onClick:function(){return N(!1)},className:"cancel-btn",children:"Cancel"})]})]}):(0,n.jsxs)("div",{className:"details-view",children:[(0,n.jsx)("h3",{children:(0,n.jsx)(g.default,{text:i.title,searchTerms:F.searchTerm,caseSensitive:!1})}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"File:"})," ",(0,n.jsx)("span",{title:i.filepath,children:i.filepath})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Time:"})," ",ea(i.timestamp)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Description:"}),(0,n.jsx)(g.default,{text:i.description||"N/A",searchTerms:F.searchTerm,caseSensitive:!1})]}),i.tags&&i.tags.length>0&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Tags:"})," ",i.tags.join(", ")]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Created:"})," ",new Date(i.createdAt).toLocaleString()]}),(0,n.jsxs)("div",{className:"detail-actions",children:[(0,n.jsx)("button",{onClick:function(){return et(i.id)},className:"jump-btn",children:"Jump To"}),(0,n.jsx)("button",{onClick:function(){return es(i)},className:"edit-btn",children:"Edit"}),(0,n.jsx)("button",{onClick:function(){return ee(i.id)},className:"delete-btn-detail",children:"Delete"})]})]})}),!i&&$.length>0&&(0,n.jsx)("div",{className:"bookmark-detail-panel placeholder-panel",children:(0,n.jsx)("p",{children:"Select a bookmark from the list to view or edit its details."})})]})]})},{}))}();
//# sourceMappingURL=window.6b6f5669.js.map
