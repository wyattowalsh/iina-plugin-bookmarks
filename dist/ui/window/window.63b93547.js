import"./window.5148fe9c.js";import"./window.6ccc4a8e.js";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},a={},t=e.parcelRequire9a9a;null==t&&((t=function(e){if(e in s)return s[e].exports;if(e in a){var t=a[e];delete a[e];var l={id:e,exports:{}};return s[e]=l,t.call(l.exports,l,l.exports),l.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,s){a[e]=s},e.parcelRequire9a9a=t),t.register;var l=t("YgFEM");t("18qrn");var i=t("d677Q"),n=t("3ruKn"),r=t("6r7ZQ"),l=t("YgFEM"),c=t("18qrn"),d=t("8YcBG"),o=t("jvi9v"),l=t("YgFEM"),c=t("18qrn");let h=[{id:"recent",name:"Recent",description:"Bookmarks created today",filters:{dateRange:{start:new Date().toISOString().split("T")[0],end:""},sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDD52"},{id:"this-week",name:"This Week",description:"Bookmarks from the past 7 days",filters:{dateRange:{start:new Date(Date.now()-6048e5).toISOString().split("T")[0],end:""},sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDCC5"},{id:"untagged",name:"Untagged",description:"Bookmarks without any tags",filters:{searchTerm:"",tags:[],sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83C\uDFF7️"},{id:"favorites",name:"Favorites",description:"Bookmarks with favorite tag",filters:{tags:["favorite"],sortBy:"createdAt",sortDirection:"desc"},icon:"⭐"},{id:"no-description",name:"Need Description",description:"Bookmarks missing descriptions",filters:{searchTerm:"",sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDCDD"}];var m=({onApplyPreset:e,onSaveCurrentAsPreset:s,currentFilters:a,customPresets:t=[],recentSearches:i=[],onClearHistory:n,className:r=""})=>{let[d,o]=(0,c.useState)(!1),[m,u]=(0,c.useState)(""),[p,x]=(0,c.useState)(""),[g,j]=(0,c.useState)("presets"),v=[...h,...t],b=(0,c.useCallback)(s=>{e(s.filters)},[e]),f=(0,c.useCallback)(()=>{m.trim()&&(s(m.trim(),p.trim()),u(""),x(""),o(!1))},[m,p,s]),N=(0,c.useCallback)(e=>{let s=e.filters;return(void 0===s.searchTerm||s.searchTerm===a.searchTerm)&&(!s.sortBy||s.sortBy===a.sortBy)&&(!s.sortDirection||s.sortDirection===a.sortDirection)&&(!s.tags||JSON.stringify(s.tags)===JSON.stringify(a.tags))&&(void 0===s.fileFilter||s.fileFilter===a.fileFilter)},[a]),k=(0,c.useCallback)(()=>""!==a.searchTerm||""!==a.dateRange.start||""!==a.dateRange.end||a.tags.length>0||""!==a.fileFilter||"createdAt"!==a.sortBy||"desc"!==a.sortDirection,[a]),y=(0,c.useCallback)(s=>{e({searchTerm:s})},[e]);return(0,l.jsxs)("div",{className:`filter-presets ${r}`,children:[(0,l.jsxs)("div",{className:"presets-section",children:[(0,l.jsxs)("div",{className:"section-header",onClick:()=>j("presets"===g?null:"presets"),children:[(0,l.jsx)("span",{className:"section-icon",children:"presets"===g?"▼":"▶"}),(0,l.jsx)("span",{className:"section-title",children:"Quick Filters"}),(0,l.jsxs)("span",{className:"section-count",children:["(",v.length,")"]})]}),"presets"===g&&(0,l.jsxs)("div",{className:"presets-content",children:[(0,l.jsx)("div",{className:"preset-grid",children:v.map(e=>(0,l.jsxs)("button",{className:`preset-button ${N(e)?"active":""}`,onClick:()=>b(e),title:e.description,children:[e.icon&&(0,l.jsx)("span",{className:"preset-icon",children:e.icon}),(0,l.jsx)("span",{className:"preset-name",children:e.name})]},e.id))}),k()&&(0,l.jsx)("div",{className:"save-preset-section",children:d?(0,l.jsxs)("div",{className:"save-preset-dialog",children:[(0,l.jsx)("input",{type:"text",placeholder:"Preset name",value:m,onChange:e=>u(e.target.value),className:"preset-name-input"}),(0,l.jsx)("input",{type:"text",placeholder:"Description (optional)",value:p,onChange:e=>x(e.target.value),className:"preset-description-input"}),(0,l.jsxs)("div",{className:"dialog-actions",children:[(0,l.jsx)("button",{onClick:f,className:"save-btn",disabled:!m.trim(),children:"Save"}),(0,l.jsx)("button",{onClick:()=>o(!1),className:"cancel-btn",children:"Cancel"})]})]}):(0,l.jsx)("button",{className:"save-preset-trigger",onClick:()=>o(!0),children:"\uD83D\uDCBE Save Current Filters as Preset"})})]})]}),i.length>0&&(0,l.jsxs)("div",{className:"history-section",children:[(0,l.jsxs)("div",{className:"section-header",onClick:()=>j("history"===g?null:"history"),children:[(0,l.jsx)("span",{className:"section-icon",children:"history"===g?"▼":"▶"}),(0,l.jsx)("span",{className:"section-title",children:"Recent Searches"}),(0,l.jsxs)("span",{className:"section-count",children:["(",i.length,")"]})]}),"history"===g&&(0,l.jsxs)("div",{className:"history-content",children:[(0,l.jsx)("div",{className:"history-list",children:i.slice(0,5).map((e,s)=>(0,l.jsxs)("button",{className:"history-item",onClick:()=>y(e),title:`Apply search: ${e}`,children:[(0,l.jsx)("span",{className:"history-icon",children:"\uD83D\uDD0D"}),(0,l.jsx)("span",{className:"history-text",children:e})]},s))}),n&&(0,l.jsx)("button",{className:"clear-history-btn",onClick:n,children:"\uD83D\uDDD1️ Clear History"})]})]})]})},u=t("mKhnF"),l=t("YgFEM"),c=t("18qrn"),p=({tags:e,onTagsChange:s,placeholder:a="Add tags...",availableTags:t=[],maxTags:i=10,disabled:n=!1,className:r=""})=>{let[d,o]=(0,c.useState)(""),[h,m]=(0,c.useState)(!1),u=(0,c.useRef)(null),p=t.filter(s=>!e.includes(s)&&s.toLowerCase().includes(d.toLowerCase())),x=(0,c.useCallback)(a=>{let t=a.trim();t&&!e.includes(t)&&e.length<i&&(s([...e,t]),o(""),m(!1))},[e,s,i]),g=(0,c.useCallback)(a=>{s(e.filter(e=>e!==a))},[e,s]),j=(0,c.useCallback)(e=>{let s=e.target.value;o(s),m(s.length>0&&p.length>0)},[p.length]),v=(0,c.useCallback)(s=>{"Enter"===s.key||","===s.key?(s.preventDefault(),d.trim()&&x(d)):"Backspace"===s.key&&!d&&e.length>0?g(e[e.length-1]):"Escape"===s.key&&(m(!1),o(""))},[d,x,g,e]),b=(0,c.useCallback)(e=>{var s;x(e),null==(s=u.current)||s.focus()},[x]),f=(0,c.useCallback)(()=>{d&&p.length>0&&m(!0)},[d,p.length]),N=(0,c.useCallback)(()=>{setTimeout(()=>m(!1),150)},[]);return(0,l.jsxs)("div",{className:`tag-input-container ${r}`,children:[(0,l.jsxs)("div",{className:"tag-input-field",children:[e.map(e=>(0,l.jsxs)("span",{className:"tag-chip",children:[(0,l.jsx)("span",{className:"tag-text",children:e}),!n&&(0,l.jsx)("button",{type:"button",className:"tag-remove",onClick:()=>g(e),"aria-label":`Remove tag ${e}`,children:"×"})]},e)),!n&&e.length<i&&(0,l.jsx)("input",{ref:u,type:"text",value:d,onChange:j,onKeyDown:v,onFocus:f,onBlur:N,placeholder:0===e.length?a:"",className:"tag-input"})]}),h&&p.length>0&&(0,l.jsx)("div",{className:"tag-suggestions",children:p.slice(0,5).map(e=>(0,l.jsx)("button",{type:"button",className:"tag-suggestion",onClick:()=>b(e),children:e},e))}),e.length>=i&&(0,l.jsxs)("div",{className:"tag-limit-message",children:["Maximum ",i," tags allowed"]})]})},l=t("YgFEM"),c=t("18qrn"),x=({isOpen:e,onClose:s,onSave:a,availableTags:t,postMessage:i})=>{let[n,r]=(0,c.useState)(""),[d,o]=(0,c.useState)(""),[h,m]=(0,c.useState)([]),[u,x]=(0,c.useState)(0),[g,j]=(0,c.useState)(!1),[v,b]=(0,c.useState)(!1);(0,c.useEffect)(()=>{e&&i&&(b(!0),i("REQUEST_BOOKMARK_DEFAULTS"))},[e,i]),(0,c.useEffect)(()=>{let s=e=>{let s=e.data;if("string"==typeof e.data)try{s=JSON.parse(e.data)}catch(e){return}if((null==s?void 0:s.type)==="BOOKMARK_DEFAULTS"&&s.data){let e=s.data;r(e.title||""),o(e.description||""),m(e.tags||[]),x(e.timestamp||0),b(!1)}};if(e)return window.addEventListener("message",s),()=>window.removeEventListener("message",s)},[e]);let f=async()=>{if(n.trim()){j(!0);try{a(n.trim(),d.trim(),h,u),s(),r(""),o(""),m([]),x(0)}catch(e){console.error("Error saving bookmark:",e)}finally{j(!1)}}},N=()=>{s(),r(""),o(""),m([]),x(0),b(!1)};return e?(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-content add-bookmark-dialog",children:[(0,l.jsxs)("div",{className:"dialog-header",children:[(0,l.jsx)("h3",{children:"Add New Bookmark"}),(0,l.jsx)("p",{className:"dialog-subtitle",children:"Values are auto-populated but can be edited before saving"}),(0,l.jsx)("button",{onClick:N,className:"close-btn",disabled:g,children:"×"})]}),(0,l.jsx)("div",{className:"dialog-body",children:v?(0,l.jsxs)("div",{className:"loading-defaults",children:[(0,l.jsx)("span",{className:"loading-spinner",children:"⏳"}),(0,l.jsx)("span",{children:"Loading metadata..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"form-field",children:[(0,l.jsxs)("label",{htmlFor:"bookmark-title",children:["Title",(0,l.jsx)("span",{className:"field-hint",children:"✏️ Editable"})]}),(0,l.jsx)("input",{id:"bookmark-title",type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"Bookmark title",disabled:g,autoFocus:!0})]}),(0,l.jsxs)("div",{className:"form-field",children:[(0,l.jsx)("label",{htmlFor:"bookmark-timestamp",children:"Time"}),(0,l.jsxs)("div",{className:"timestamp-field",children:[(0,l.jsx)("input",{id:"bookmark-timestamp",type:"text",value:(e=>{let s=Math.floor(e/3600),a=Math.floor(e%3600/60),t=Math.floor(e%60);return s>0?`${s}:${a.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`:`${a}:${t.toString().padStart(2,"0")}`})(u),readOnly:!0,disabled:g}),(0,l.jsxs)("span",{className:"timestamp-note",children:[u,"s"]})]})]}),(0,l.jsxs)("div",{className:"form-field",children:[(0,l.jsxs)("label",{htmlFor:"bookmark-description",children:["Description",(0,l.jsx)("span",{className:"field-hint",children:"✏️ Editable"})]}),(0,l.jsx)("textarea",{id:"bookmark-description",value:d,onChange:e=>o(e.target.value),placeholder:"Optional description",rows:3,disabled:g})]}),(0,l.jsxs)("div",{className:"form-field",children:[(0,l.jsxs)("label",{children:["Tags",(0,l.jsx)("span",{className:"field-hint",children:"✏️ Editable"})]}),(0,l.jsx)(p,{tags:h,onTagsChange:m,availableTags:t,disabled:g})]})]})}),(0,l.jsxs)("div",{className:"dialog-actions",children:[(0,l.jsx)("button",{onClick:f,className:"save-btn",disabled:!n.trim()||g||v,children:g?"Saving...":"Save Bookmark"}),(0,l.jsx)("button",{onClick:N,className:"cancel-btn",disabled:g,children:"Cancel"})]})]})}):null},n=t("3ruKn"),r=t("6r7ZQ"),l=t("YgFEM"),c=t("18qrn"),g=({isOpen:e,onClose:s,availableTags:a,postMessage:t})=>{let[i,d]=(0,c.useState)("json"),[o,h]=(0,c.useState)(!0),[m,u]=(0,c.useState)(!1),[p,x]=(0,c.useState)(null),[g,j]=(0,c.useState)(["id","title","timestamp","filepath","description","createdAt","tags"]),[v,b]=(0,c.useState)(","),[f,N]=(0,c.useState)(!0),[k,y]=(0,c.useState)(!1),[C,S]=(0,c.useState)([]),[D,T]=(0,c.useState)({start:"",end:""}),[E,w]=(0,c.useState)("");(0,c.useEffect)(()=>{let e=e=>{"EXPORT_RESULT"===e.data.type&&(u(!1),x(e.data.data),e.data.data.success&&e.data.data.data&&A(e.data.data.data,e.data.data.filePath||"export.txt"))};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]);let A=(e,s)=>{let a=new Blob([e],{type:"json"===i?"application/json":"text/csv"}),t=URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=s,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t)},F=e=>{j(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},M=e=>{S(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},B=()=>{if(m)return;u(!0),x(null);let e=(0,n._)({format:i,includeMetadata:o},"csv"===i&&{selectedFields:g,delimiter:v,includeHeaders:f},k&&{filter:(0,n._)({},C.length>0&&{tags:C},D.start&&D.end&&{dateRange:D},E&&{mediaType:E})});null==t||t("EXPORT_BOOKMARKS",e)},O=()=>{m||(x(null),s())};return e?(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-content export-dialog",children:[(0,l.jsxs)("div",{className:"dialog-header",children:[(0,l.jsx)("h3",{children:"Export Bookmarks"}),(0,l.jsx)("p",{className:"dialog-subtitle",children:"Choose format and options for exporting your bookmarks"}),(0,l.jsx)("button",{onClick:O,className:"close-btn",disabled:m,children:"×"})]}),(0,l.jsx)("div",{className:"dialog-body",children:p?(0,l.jsx)("div",{className:"export-result",children:p.success?(0,l.jsxs)("div",{className:"success-message",children:[(0,l.jsx)("div",{className:"result-icon",children:"✅"}),(0,l.jsx)("h4",{children:"Export Successful!"}),(0,l.jsxs)("p",{children:["Exported ",p.recordCount," bookmarks"]}),(0,l.jsxs)("p",{children:["File: ",p.filePath]}),(0,l.jsx)("button",{onClick:()=>x(null),className:"btn-primary",children:"Export Another"})]}):(0,l.jsxs)("div",{className:"error-message",children:[(0,l.jsx)("div",{className:"result-icon",children:"❌"}),(0,l.jsx)("h4",{children:"Export Failed"}),(0,l.jsx)("p",{children:p.error}),(0,l.jsx)("button",{onClick:()=>x(null),className:"btn-primary",children:"Try Again"})]})}):(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),B()},children:[(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h4",{children:"Export Format"}),(0,l.jsxs)("div",{className:"format-options",children:[(0,l.jsxs)("label",{className:"format-option",children:[(0,l.jsx)("input",{type:"radio",value:"json",checked:"json"===i,onChange:e=>d(e.target.value),disabled:m}),(0,l.jsxs)("div",{className:"format-info",children:[(0,l.jsx)("strong",{children:"JSON"}),(0,l.jsx)("span",{children:"Complete data with metadata, ideal for backup/restore"})]})]}),(0,l.jsxs)("label",{className:"format-option",children:[(0,l.jsx)("input",{type:"radio",value:"csv",checked:"csv"===i,onChange:e=>d(e.target.value),disabled:m}),(0,l.jsxs)("div",{className:"format-info",children:[(0,l.jsx)("strong",{children:"CSV"}),(0,l.jsx)("span",{children:"Tabular format for spreadsheet analysis"})]})]})]})]}),"csv"===i&&(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h4",{children:"CSV Options"}),(0,l.jsxs)("div",{className:"form-field",children:[(0,l.jsx)("label",{children:"Delimiter"}),(0,l.jsxs)("select",{value:v,onChange:e=>b(e.target.value),disabled:m,children:[(0,l.jsx)("option",{value:",",children:"Comma (,)"}),(0,l.jsx)("option",{value:";",children:"Semicolon (;)"}),(0,l.jsx)("option",{value:"\\t",children:"Tab"})]})]}),(0,l.jsx)("div",{className:"form-field",children:(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"checkbox",checked:f,onChange:e=>N(e.target.checked),disabled:m}),"Include column headers"]})}),(0,l.jsxs)("div",{className:"form-field",children:[(0,l.jsx)("label",{children:"Fields to Export"}),(0,l.jsx)("div",{className:"field-checkboxes",children:["id","title","timestamp","filepath","description","createdAt","tags"].map(e=>(0,l.jsxs)("label",{className:"field-checkbox",children:[(0,l.jsx)("input",{type:"checkbox",checked:g.includes(e),onChange:()=>F(e),disabled:m}),e]},e))})]})]}),(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h4",{children:"Export Options"}),(0,l.jsx)("div",{className:"form-field",children:(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"checkbox",checked:o,onChange:e=>h(e.target.checked),disabled:m}),"Include export metadata"]})})]}),(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h4",{children:"Filtering"}),(0,l.jsx)("div",{className:"form-field",children:(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"checkbox",checked:k,onChange:e=>y(e.target.checked),disabled:m}),"Apply filters to export"]})}),k&&(0,l.jsxs)(l.Fragment,{children:[a.length>0&&(0,l.jsxs)("div",{className:"form-field",children:[(0,l.jsx)("label",{children:"Filter by Tags"}),(0,l.jsx)("div",{className:"tag-checkboxes",children:a.map(e=>(0,l.jsxs)("label",{className:"tag-checkbox",children:[(0,l.jsx)("input",{type:"checkbox",checked:C.includes(e),onChange:()=>M(e),disabled:m}),e]},e))})]}),(0,l.jsxs)("div",{className:"form-field",children:[(0,l.jsx)("label",{children:"Date Range"}),(0,l.jsxs)("div",{className:"date-range",children:[(0,l.jsx)("input",{type:"date",value:D.start,onChange:e=>T(s=>(0,r._)((0,n._)({},s),{start:e.target.value})),disabled:m,placeholder:"Start date"}),(0,l.jsx)("span",{children:"to"}),(0,l.jsx)("input",{type:"date",value:D.end,onChange:e=>T(s=>(0,r._)((0,n._)({},s),{end:e.target.value})),disabled:m,placeholder:"End date"})]})]}),(0,l.jsxs)("div",{className:"form-field",children:[(0,l.jsx)("label",{children:"Media Type"}),(0,l.jsxs)("select",{value:E,onChange:e=>w(e.target.value),disabled:m,children:[(0,l.jsx)("option",{value:"",children:"All types"}),["Video","Audio","Movie","TV Show","Documentary"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,l.jsxs)("div",{className:"dialog-actions",children:[(0,l.jsx)("button",{type:"button",onClick:O,className:"btn-secondary",disabled:m,children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"btn-primary",disabled:m||"csv"===i&&0===g.length,children:m?"Exporting...":"Export Bookmarks"})]})]})})]})}):null},j=t("8zbWC"),v=t("cEMf7");let b=document.getElementById("app");b&&(0,i.createRoot)(b).render((0,l.jsx)(()=>{var e,s;let[a,t]=(0,c.useState)([]),[i,h]=(0,c.useState)(null),[b,f]=(0,c.useState)(!1),[N,k]=(0,c.useState)(""),[y,C]=(0,c.useState)(""),[S,D]=(0,c.useState)([]),[T,E]=(0,c.useState)(void 0),[w,A]=(0,c.useState)({searchTerm:"",dateRange:{start:"",end:""},tags:[],sortBy:"createdAt",sortDirection:"desc",fileFilter:""}),[F,M]=(0,c.useState)(),[B,O]=(0,c.useState)(!1),[R,_]=(0,c.useState)(!1),[P,L]=(0,c.useState)(!1),K=window,{filteredBookmarks:U,resultsCount:$,availableFiles:H,availableTags:I,analytics:q}=(0,j.default)({bookmarks:a,filters:w,parsedQuery:B?F:void 0}),{recentSearches:Y,customPresets:J,addRecentSearch:Q,clearRecentSearches:V,saveFilterPreset:W,deleteFilterPreset:X,incrementPresetUsage:Z}=(0,v.default)();(0,c.useEffect)(()=>{var e,s;let a=e=>{let s=e.data;if("string"==typeof e.data)try{s=JSON.parse(e.data)}catch(e){return}(null==s?void 0:s.type)==="BOOKMARKS_UPDATED"&&s.data?(t(s.data),i&&!s.data.find(e=>e.id===i.id)&&(h(null),f(!1))):(null==s?void 0:s.type)==="CURRENT_FILE_PATH"&&s.data&&E(s.data)};return(null==(e=K.iina)?void 0:e.onMessage)?K.iina.onMessage("message",a):window.addEventListener("message",a),(null==(s=K.iina)?void 0:s.postMessage)&&(K.iina.postMessage("UI_READY",{uiType:"window"}),K.iina.postMessage("REQUEST_FILE_PATH")),()=>{var e;(null==(e=K.iina)?void 0:e.onMessage)||window.removeEventListener("message",a)}},[i]);let z=e=>{var s,a;null==(a=K.iina)||null==(s=a.postMessage)||s.call(a,"DELETE_BOOKMARK",{id:e})},G=e=>{var s,a;null==(a=K.iina)||null==(s=a.postMessage)||s.call(a,"JUMP_TO_BOOKMARK",{id:e})},ee=e=>{h(e),k(e.title),C(e.description||""),D(e.tags||[]),f(!0)},es=e=>new Date(1e3*e).toISOString().substr(11,8);return(0,l.jsxs)("div",{className:"bookmark-window",children:[(0,l.jsxs)("div",{className:"window-header",children:[(0,l.jsx)("h1",{children:"Manage All Bookmarks"}),(0,l.jsxs)("div",{className:"header-actions",children:[(0,l.jsx)("button",{onClick:()=>{_(!0)},className:"add-bookmark-btn",children:"Add Bookmark to Current Video"}),(0,l.jsx)("button",{onClick:()=>L(!0),className:"export-btn",children:"Export Bookmarks"})]})]}),(0,l.jsx)(x,{isOpen:R,onClose:()=>_(!1),onSave:(e,s,a,t)=>{var l,i;null==(i=K.iina)||null==(l=i.postMessage)||l.call(i,"ADD_BOOKMARK",{title:e,description:s,tags:a,timestamp:t})},availableTags:I,postMessage:null==(e=K.iina)?void 0:e.postMessage}),(0,l.jsx)(g,{isOpen:P,onClose:()=>L(!1),availableTags:I,postMessage:null==(s=K.iina)?void 0:s.postMessage}),(0,l.jsx)(m,{onApplyPreset:e=>{A(s=>(0,n._)({},s,e))},onSaveCurrentAsPreset:(e,s)=>{W(e,s,w)},currentFilters:w,customPresets:J,recentSearches:Y,onClearHistory:V}),(0,l.jsxs)("div",{className:"filter-row",children:[(0,l.jsxs)("div",{className:"advanced-search-toggle",onClick:()=>O(!B),children:[(0,l.jsx)("span",{className:`toggle-icon ${B?"expanded":""}`,children:"▶"}),(0,l.jsx)("span",{children:"Advanced Search"})]}),q.hasActiveFilters&&(0,l.jsxs)("div",{className:"filter-analytics",children:[(0,l.jsxs)("div",{className:"analytics-item",children:[(0,l.jsx)("span",{className:"analytics-icon",children:"\uD83D\uDCCA"}),(0,l.jsx)("span",{className:"analytics-value",children:q.filteredCount}),(0,l.jsxs)("span",{children:["of ",q.totalBookmarks]})]}),q.reductionPercentage>0&&(0,l.jsxs)("div",{className:`analytics-item reduction-percentage ${q.reductionPercentage>75?"high-reduction":""}`,children:[(0,l.jsx)("span",{className:"analytics-icon",children:"\uD83D\uDCC9"}),(0,l.jsxs)("span",{className:"analytics-value",children:[q.reductionPercentage,"%"]}),(0,l.jsx)("span",{children:"filtered out"})]})]})]}),B?(0,l.jsx)(o.default,{onSearchChange:(e,s)=>{M(s),A(s=>(0,r._)((0,n._)({},s),{searchTerm:e})),e.trim()&&Q(e)},availableTags:I,availableFiles:H,recentSearches:Y}):(0,l.jsx)(d.default,{onFilterChange:A,availableTags:I,availableFiles:H,resultsCount:$,showAdvanced:!0,initialFilters:w}),(0,l.jsxs)("div",{className:"content-area",children:[(0,l.jsx)("div",{className:"bookmark-list-panel",children:0===U.length?(0,l.jsx)("p",{className:"empty-state-text",children:"No bookmarks match your current filters."}):U.map(e=>(0,l.jsxs)("div",{className:`bookmark-entry ${(null==i?void 0:i.id)===e.id?"selected":""}`,onClick:()=>h(e),children:[(0,l.jsx)("h4",{children:(0,l.jsx)(u.default,{text:e.title,searchTerms:w.searchTerm,caseSensitive:!1})}),(0,l.jsxs)("p",{className:"filepath",title:e.filepath,children:[e.filepath.split("/").pop()," (",es(e.timestamp),")"]}),e.tags&&e.tags.length>0&&(0,l.jsx)("div",{className:"bookmark-tags-small",children:e.tags.map(e=>(0,l.jsx)("span",{className:"bookmark-tag-small",children:e},e))}),(0,l.jsxs)("p",{className:"created-date-small",children:["Added: ",new Date(e.createdAt).toLocaleDateString()]})]},e.id))}),i&&(0,l.jsx)("div",{className:"bookmark-detail-panel",children:b?(0,l.jsxs)("div",{className:"edit-form",children:[(0,l.jsx)("h3",{children:"Edit Bookmark"}),(0,l.jsx)("input",{type:"text",value:N,onChange:e=>k(e.target.value),placeholder:"Title"}),(0,l.jsx)("textarea",{value:y,onChange:e=>C(e.target.value),placeholder:"Description"}),(0,l.jsx)(p,{tags:S,onTagsChange:D,availableTags:I}),(0,l.jsxs)("div",{className:"edit-actions",children:[(0,l.jsx)("button",{onClick:()=>{if(i){var e,s;null==(s=K.iina)||null==(e=s.postMessage)||e.call(s,"UPDATE_BOOKMARK",{id:i.id,data:{title:N,description:y,tags:S}}),f(!1),h(e=>e?(0,r._)((0,n._)({},e),{title:N,description:y,tags:S}):null),t(e=>e.map(e=>e.id===i.id?(0,r._)((0,n._)({},e),{title:N,description:y,tags:S}):e))}},className:"save-btn",children:"Save Changes"}),(0,l.jsx)("button",{onClick:()=>f(!1),className:"cancel-btn",children:"Cancel"})]})]}):(0,l.jsxs)("div",{className:"details-view",children:[(0,l.jsx)("h3",{children:(0,l.jsx)(u.default,{text:i.title,searchTerms:w.searchTerm,caseSensitive:!1})}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"File:"})," ",(0,l.jsx)("span",{title:i.filepath,children:i.filepath})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Time:"})," ",es(i.timestamp)]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Description:"}),(0,l.jsx)(u.default,{text:i.description||"N/A",searchTerms:w.searchTerm,caseSensitive:!1})]}),i.tags&&i.tags.length>0&&(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Tags:"})," ",i.tags.join(", ")]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Created:"})," ",new Date(i.createdAt).toLocaleString()]}),(0,l.jsxs)("div",{className:"detail-actions",children:[(0,l.jsx)("button",{onClick:()=>G(i.id),className:"jump-btn",children:"Jump To"}),(0,l.jsx)("button",{onClick:()=>ee(i),className:"edit-btn",children:"Edit"}),(0,l.jsx)("button",{onClick:()=>z(i.id),className:"delete-btn-detail",children:"Delete"})]})]})}),!i&&U.length>0&&(0,l.jsx)("div",{className:"bookmark-detail-panel placeholder-panel",children:(0,l.jsx)("p",{children:"Select a bookmark from the list to view or edit its details."})})]})]})},{}));
//# sourceMappingURL=window.63b93547.js.map
