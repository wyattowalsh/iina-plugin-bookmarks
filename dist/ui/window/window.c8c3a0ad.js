!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},s={},n=r.parcelRequire9a9a;null==n&&((n=function(e){if(e in a)return a[e].exports;if(e in s){var t=s[e];delete s[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},r.parcelRequire9a9a=n);var i=n.register;i("c04QX",function(r,a){t(r.exports,"default",function(){return m});var s=n("gDbdG"),i=n("78RNE"),c=n("hiL4o"),l=n("8IRNY"),o=n("jr3WH"),u=n("joq15"),d=n("h0YY3"),f=n("lIwkd"),g={searchTerm:"",dateRange:{start:"",end:""},tags:[],sortBy:"createdAt",sortDirection:"desc",fileFilter:""},m=function(t){var r=t.onFilterChange,a=t.availableTags,n=void 0===a?[]:a,m=t.availableFiles,h=void 0===m?[]:m,v=t.resultsCount,p=t.compact,S=void 0!==p&&p,x=t.showAdvanced,j=t.initialFilters,b=t.viewId,_=(0,s._)({},g,void 0===j?{}:j),k=(0,c._)((0,f.usePersistentFilterState)(void 0===b?"default":b,_),2),C=k[0],N=k[1],y=(0,c._)((0,u.useState)(void 0!==x&&x),2),w=y[0],P=y[1],R=(0,c._)((0,u.useState)(!1),2),U=R[0],F=R[1],T=(0,c._)((0,u.useState)(C.searchTerm),2),O=T[0],D=T[1],E=(0,d.default)(O,300),A=(0,u.useCallback)(function(e){var t=(0,s._)({},C,e);N(t),r(t)},[C,r,N]);e(u).useEffect(function(){E!==C.searchTerm&&A({searchTerm:E})},[E,C.searchTerm,A]),e(u).useEffect(function(){r(C)},[]);var I=(0,u.useCallback)(function(e){D(e.target.value)},[]),$=(0,u.useCallback)(function(e){var t=(0,c._)(e.target.value.split("-"),2);A({sortBy:t[0],sortDirection:t[1]})},[A]),L=(0,u.useCallback)(function(e,t){A({dateRange:(0,i._)((0,s._)({},C.dateRange),{[e]:t})})},[C.dateRange,A]),q=(0,u.useCallback)(function(e){A({tags:C.tags.includes(e)?C.tags.filter(function(t){return t!==e}):(0,l._)(C.tags).concat([e])})},[C.tags,A]),B=(0,u.useCallback)(function(e){A({tags:C.tags.filter(function(t){return t!==e})})},[C.tags,A]),J=(0,u.useCallback)(function(e){A({fileFilter:e.target.value})},[A]),H=(0,u.useCallback)(function(){N(g),D(""),r(g)},[r]),M=(0,u.useMemo)(function(){return C.searchTerm||C.dateRange.start||C.dateRange.end||C.tags.length>0||C.fileFilter},[C]),Y=`${C.sortBy}-${C.sortDirection}`;return(0,o.jsxs)("div",{className:`filter-container ${S?"compact":""}`,children:[(0,o.jsxs)("div",{className:"filter-row",children:[(0,o.jsx)("div",{className:"filter-group",children:(0,o.jsx)("input",{type:"text",className:`filter-input ${S?"compact":""}`,placeholder:"Search bookmarks...",value:O,onChange:I})}),(0,o.jsx)("div",{className:"filter-group",children:(0,o.jsxs)("select",{className:`filter-select ${S?"compact":""}`,value:Y,onChange:$,children:[(0,o.jsx)("option",{value:"createdAt-desc",children:"Latest First"}),(0,o.jsx)("option",{value:"createdAt-asc",children:"Oldest First"}),(0,o.jsx)("option",{value:"title-asc",children:"Title A-Z"}),(0,o.jsx)("option",{value:"title-desc",children:"Title Z-A"}),(0,o.jsx)("option",{value:"timestamp-asc",children:"Time (Start)"}),(0,o.jsx)("option",{value:"timestamp-desc",children:"Time (End)"})]})}),h.length>0&&(0,o.jsx)("div",{className:"filter-group",children:(0,o.jsxs)("select",{className:`filter-select ${S?"compact":""}`,value:C.fileFilter,onChange:J,children:[(0,o.jsx)("option",{value:"",children:"All Files"}),h.map(function(e){return(0,o.jsx)("option",{value:e,children:e},e)})]})}),n.length>0&&(0,o.jsx)("div",{className:"filter-group",children:(0,o.jsxs)("div",{className:"multi-select-dropdown",children:[(0,o.jsxs)("button",{className:`dropdown-toggle ${S?"compact":""}`,onClick:function(){return F(!U)},children:["Tags (",C.tags.length,")"]}),U&&(0,o.jsx)("div",{className:"dropdown-menu",children:n.map(function(e){return(0,o.jsxs)("div",{className:"dropdown-item",onClick:function(){return q(e)},children:[(0,o.jsx)("input",{type:"checkbox",checked:C.tags.includes(e),readOnly:!0}),(0,o.jsx)("span",{children:e})]},e)})})]})})]}),C.tags.length>0&&(0,o.jsx)("div",{className:"filter-tags",children:C.tags.map(function(e){return(0,o.jsxs)("span",{className:"filter-tag",children:[e,(0,o.jsx)("span",{className:"remove-tag",onClick:function(){return B(e)},children:"×"})]},e)})}),n.length>0&&(0,o.jsxs)("div",{className:"advanced-filter-panel",children:[(0,o.jsxs)("div",{className:"advanced-toggle",onClick:function(){return P(!w)},children:[(0,o.jsx)("span",{children:w?"▼":"▶"}),(0,o.jsx)("span",{children:"Advanced Filters"})]}),w&&(0,o.jsx)("div",{className:"advanced-content",children:(0,o.jsx)("div",{className:"filter-row",children:(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{className:"filter-label",children:"Date Range"}),(0,o.jsxs)("div",{className:"date-range-picker",children:[(0,o.jsx)("input",{type:"date",value:C.dateRange.start,onChange:function(e){return L("start",e.target.value)}}),(0,o.jsx)("span",{className:"date-separator",children:"to"}),(0,o.jsx)("input",{type:"date",value:C.dateRange.end,onChange:function(e){return L("end",e.target.value)}})]})]})})})]}),(0,o.jsxs)("div",{className:"filter-row",children:[void 0!==v&&(0,o.jsxs)("div",{className:"filter-results-count",children:[v," bookmark",1!==v?"s":""," found"]}),M&&(0,o.jsx)("button",{className:"filter-clear",onClick:H,children:"Clear all filters"})]})]})}}),i("lIwkd",function(e,r){t(e.exports,"usePersistentFilterState",function(){return i});var a=n("hiL4o"),s=n("joq15");function i(e,t){var r,n,i,c;return r=`iina-bookmarks-filters-${e}`,i=(n=(0,a._)((0,s.useState)(function(){try{var e=window.localStorage.getItem(r);return e?JSON.parse(e):t}catch(e){return console.warn(`Error reading localStorage key "${r}":`,e),t}}),2))[0],c=n[1],[i,function(e){try{c(e),window.localStorage.setItem(r,JSON.stringify(e))}catch(e){console.warn(`Error setting localStorage key "${r}":`,e)}}]}}),i("bfvSq",function(e,r){t(e.exports,"default",function(){return u});var a=n("gDbdG"),s=n("78RNE"),i=n("hiL4o"),c=n("8IRNY"),l=n("joq15"),o="bookmark-filter-history",u=function(){var e=(0,i._)((0,l.useState)({recentSearches:[],customPresets:[],filterUsageStats:{}}),2),t=e[0],r=e[1];(0,l.useEffect)(function(){try{var e=localStorage.getItem(o);if(e){var t=JSON.parse(e);r({recentSearches:t.recentSearches||[],customPresets:t.customPresets||[],filterUsageStats:t.filterUsageStats||{}})}}catch(e){console.error("Error loading filter history:",e)}},[]);var n=(0,l.useCallback)(function(e){try{localStorage.setItem(o,JSON.stringify(e)),r(e)}catch(e){console.error("Error saving filter history:",e)}},[]),u=(0,l.useCallback)(function(e){if(e.trim()){var r=e.trim(),i=[r].concat((0,c._)(t.recentSearches.filter(function(e){return e!==r}))).slice(0,10);n((0,s._)((0,a._)({},t),{recentSearches:i}))}},[t,n]),d=(0,l.useCallback)(function(){n((0,s._)((0,a._)({},t),{recentSearches:[]}))},[t,n]),f=(0,l.useCallback)(function(e,r,i){var l={id:`custom-${Date.now()}`,name:e.trim(),description:r.trim(),filters:{searchTerm:i.searchTerm,dateRange:i.dateRange,tags:(0,c._)(i.tags),sortBy:i.sortBy,sortDirection:i.sortDirection,fileFilter:i.fileFilter},createdAt:new Date().toISOString(),usageCount:0},o=[l].concat((0,c._)(t.customPresets.filter(function(t){return t.name!==e.trim()}))).slice(0,20);return n((0,s._)((0,a._)({},t),{customPresets:o})),l.id},[t,n]),g=(0,l.useCallback)(function(e){var r=t.customPresets.filter(function(t){return t.id!==e});n((0,s._)((0,a._)({},t),{customPresets:r}))},[t,n]),m=(0,l.useCallback)(function(e){var r=t.customPresets.map(function(t){return t.id===e?(0,s._)((0,a._)({},t),{usageCount:t.usageCount+1}):t});n((0,s._)((0,a._)({},t),{customPresets:r}))},[t,n]),h=(0,l.useCallback)(function(e){var r=(0,s._)((0,a._)({},t.filterUsageStats),{[e]:(t.filterUsageStats[e]||0)+1});n((0,s._)((0,a._)({},t),{filterUsageStats:r}))},[t,n]),v=(0,l.useCallback)(function(){return Object.entries(t.filterUsageStats).sort(function(e,t){var r=(0,i._)(e,2)[1];return(0,i._)(t,2)[1]-r}).slice(0,5).map(function(e){var t=(0,i._)(e,2);return{filter:t[0],count:t[1]}})},[t.filterUsageStats]),p=(0,l.useCallback)(function(){return(0,c._)(t.customPresets).sort(function(e,t){return t.usageCount-e.usageCount}).slice(0,5)},[t.customPresets]),S=(0,l.useCallback)(function(){var e=new Blob([JSON.stringify((0,s._)((0,a._)({},t),{exportedAt:new Date().toISOString(),version:"1.0"}),null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`bookmark-filter-history-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)},[t]),x=(0,l.useCallback)(function(e){return new Promise(function(r){var s=new FileReader;s.onload=function(e){try{var s,i=JSON.parse(null==(s=e.target)?void 0:s.result);if(i.recentSearches&&i.customPresets){var l={recentSearches:(0,c._)(t.recentSearches).concat((0,c._)(i.recentSearches||[])).slice(0,10),customPresets:(0,c._)(t.customPresets).concat((0,c._)(i.customPresets||[])).slice(0,20),filterUsageStats:(0,a._)({},t.filterUsageStats,i.filterUsageStats||{})};n(l),r(!0)}else r(!1)}catch(e){console.error("Error importing filter history:",e),r(!1)}},s.readAsText(e)})},[t,n]),j=(0,l.useCallback)(function(){n({recentSearches:[],customPresets:[],filterUsageStats:{}})},[n]);return{recentSearches:t.recentSearches,customPresets:t.customPresets,filterUsageStats:t.filterUsageStats,addRecentSearch:u,clearRecentSearches:d,saveFilterPreset:f,deleteFilterPreset:g,incrementPresetUsage:m,trackFilterUsage:h,getMostUsedFilters:v,getPopularPresets:p,exportHistory:S,importHistory:x,clearAllHistory:j}}})}();
//# sourceMappingURL=window.c8c3a0ad.js.map
