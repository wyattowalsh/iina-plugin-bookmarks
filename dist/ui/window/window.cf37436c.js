!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},s={},a=e.parcelRequire9a9a;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in s){var a=s[e];delete s[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){s[e]=t},e.parcelRequire9a9a=a),a.register;var n=a("jr3WH");a("joq15");var i=a("fEatv"),r=a("gDbdG"),l=a("78RNE"),c=a("hiL4o"),n=a("jr3WH"),o=a("joq15"),d=a("c04QX"),u=a("blyWw"),c=a("hiL4o"),h=a("8IRNY"),n=a("jr3WH"),o=a("joq15"),m=[{id:"recent",name:"Recent",description:"Bookmarks created today",filters:{dateRange:{start:new Date().toISOString().split("T")[0],end:""},sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDD52"},{id:"this-week",name:"This Week",description:"Bookmarks from the past 7 days",filters:{dateRange:{start:new Date(Date.now()-6048e5).toISOString().split("T")[0],end:""},sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDCC5"},{id:"untagged",name:"Untagged",description:"Bookmarks without any tags",filters:{searchTerm:"",tags:[],sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83C\uDFF7️"},{id:"favorites",name:"Favorites",description:"Bookmarks with favorite tag",filters:{tags:["favorite"],sortBy:"createdAt",sortDirection:"desc"},icon:"⭐"},{id:"no-description",name:"Need Description",description:"Bookmarks missing descriptions",filters:{searchTerm:"",sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDCDD"}],p=function(e){var t=e.onApplyPreset,s=e.onSaveCurrentAsPreset,a=e.currentFilters,i=e.customPresets,r=e.recentSearches,l=void 0===r?[]:r,d=e.onClearHistory,u=e.className,p=(0,c._)((0,o.useState)(!1),2),f=p[0],x=p[1],v=(0,c._)((0,o.useState)(""),2),g=v[0],j=v[1],b=(0,c._)((0,o.useState)(""),2),N=b[0],k=b[1],y=(0,c._)((0,o.useState)("presets"),2),C=y[0],S=y[1],D=(0,h._)(m).concat((0,h._)(void 0===i?[]:i)),_=(0,o.useCallback)(function(e){t(e.filters)},[t]),T=(0,o.useCallback)(function(){g.trim()&&(s(g.trim(),N.trim()),j(""),k(""),x(!1))},[g,N,s]),E=(0,o.useCallback)(function(e){var t=e.filters;return(void 0===t.searchTerm||t.searchTerm===a.searchTerm)&&(!t.sortBy||t.sortBy===a.sortBy)&&(!t.sortDirection||t.sortDirection===a.sortDirection)&&(!t.tags||JSON.stringify(t.tags)===JSON.stringify(a.tags))&&(void 0===t.fileFilter||t.fileFilter===a.fileFilter)},[a]),w=(0,o.useCallback)(function(){return""!==a.searchTerm||""!==a.dateRange.start||""!==a.dateRange.end||a.tags.length>0||""!==a.fileFilter||"createdAt"!==a.sortBy||"desc"!==a.sortDirection},[a]),A=(0,o.useCallback)(function(e){t({searchTerm:e})},[t]);return(0,n.jsxs)("div",{className:`filter-presets ${void 0===u?"":u}`,children:[(0,n.jsxs)("div",{className:"presets-section",children:[(0,n.jsxs)("div",{className:"section-header",onClick:function(){return S("presets"===C?null:"presets")},children:[(0,n.jsx)("span",{className:"section-icon",children:"presets"===C?"▼":"▶"}),(0,n.jsx)("span",{className:"section-title",children:"Quick Filters"}),(0,n.jsxs)("span",{className:"section-count",children:["(",D.length,")"]})]}),"presets"===C&&(0,n.jsxs)("div",{className:"presets-content",children:[(0,n.jsx)("div",{className:"preset-grid",children:D.map(function(e){return(0,n.jsxs)("button",{className:`preset-button ${E(e)?"active":""}`,onClick:function(){return _(e)},title:e.description,children:[e.icon&&(0,n.jsx)("span",{className:"preset-icon",children:e.icon}),(0,n.jsx)("span",{className:"preset-name",children:e.name})]},e.id)})}),w()&&(0,n.jsx)("div",{className:"save-preset-section",children:f?(0,n.jsxs)("div",{className:"save-preset-dialog",children:[(0,n.jsx)("input",{type:"text",placeholder:"Preset name",value:g,onChange:function(e){return j(e.target.value)},className:"preset-name-input"}),(0,n.jsx)("input",{type:"text",placeholder:"Description (optional)",value:N,onChange:function(e){return k(e.target.value)},className:"preset-description-input"}),(0,n.jsxs)("div",{className:"dialog-actions",children:[(0,n.jsx)("button",{onClick:T,className:"save-btn",disabled:!g.trim(),children:"Save"}),(0,n.jsx)("button",{onClick:function(){return x(!1)},className:"cancel-btn",children:"Cancel"})]})]}):(0,n.jsx)("button",{className:"save-preset-trigger",onClick:function(){return x(!0)},children:"\uD83D\uDCBE Save Current Filters as Preset"})})]})]}),l.length>0&&(0,n.jsxs)("div",{className:"history-section",children:[(0,n.jsxs)("div",{className:"section-header",onClick:function(){return S("history"===C?null:"history")},children:[(0,n.jsx)("span",{className:"section-icon",children:"history"===C?"▼":"▶"}),(0,n.jsx)("span",{className:"section-title",children:"Recent Searches"}),(0,n.jsxs)("span",{className:"section-count",children:["(",l.length,")"]})]}),"history"===C&&(0,n.jsxs)("div",{className:"history-content",children:[(0,n.jsx)("div",{className:"history-list",children:l.slice(0,5).map(function(e,t){return(0,n.jsxs)("button",{className:"history-item",onClick:function(){return A(e)},title:`Apply search: ${e}`,children:[(0,n.jsx)("span",{className:"history-icon",children:"\uD83D\uDD0D"}),(0,n.jsx)("span",{className:"history-text",children:e})]},t)})}),d&&(0,n.jsx)("button",{className:"clear-history-btn",onClick:d,children:"\uD83D\uDDD1️ Clear History"})]})]})]})},f=a("7yYUG"),c=a("hiL4o"),h=a("8IRNY"),n=a("jr3WH"),o=a("joq15"),x=function(e){var t=e.tags,s=e.onTagsChange,a=e.placeholder,i=e.availableTags,r=e.maxTags,l=void 0===r?10:r,d=e.disabled,u=void 0!==d&&d,m=e.className,p=(0,c._)((0,o.useState)(""),2),f=p[0],x=p[1],v=(0,c._)((0,o.useState)(!1),2),g=v[0],j=v[1],b=(0,o.useRef)(null),N=(void 0===i?[]:i).filter(function(e){return!t.includes(e)&&e.toLowerCase().includes(f.toLowerCase())}),k=(0,o.useCallback)(function(e){var a=e.trim();a&&!t.includes(a)&&t.length<l&&(s((0,h._)(t).concat([a])),x(""),j(!1))},[t,s,l]),y=(0,o.useCallback)(function(e){s(t.filter(function(t){return t!==e}))},[t,s]),C=(0,o.useCallback)(function(e){var t=e.target.value;x(t),j(t.length>0&&N.length>0)},[N.length]),S=(0,o.useCallback)(function(e){"Enter"===e.key||","===e.key?(e.preventDefault(),f.trim()&&k(f)):"Backspace"===e.key&&!f&&t.length>0?y(t[t.length-1]):"Escape"===e.key&&(j(!1),x(""))},[f,k,y,t]),D=(0,o.useCallback)(function(e){var t;k(e),null==(t=b.current)||t.focus()},[k]),_=(0,o.useCallback)(function(){f&&N.length>0&&j(!0)},[f,N.length]),T=(0,o.useCallback)(function(){setTimeout(function(){return j(!1)},150)},[]);return(0,n.jsxs)("div",{className:`tag-input-container ${void 0===m?"":m}`,children:[(0,n.jsxs)("div",{className:"tag-input-field",children:[t.map(function(e){return(0,n.jsxs)("span",{className:"tag-chip",children:[(0,n.jsx)("span",{className:"tag-text",children:e}),!u&&(0,n.jsx)("button",{type:"button",className:"tag-remove",onClick:function(){return y(e)},"aria-label":`Remove tag ${e}`,children:"×"})]},e)}),!u&&t.length<l&&(0,n.jsx)("input",{ref:b,type:"text",value:f,onChange:C,onKeyDown:S,onFocus:_,onBlur:T,placeholder:0===t.length?void 0===a?"Add tags...":a:"",className:"tag-input"})]}),g&&N.length>0&&(0,n.jsx)("div",{className:"tag-suggestions",children:N.slice(0,5).map(function(e){return(0,n.jsx)("button",{type:"button",className:"tag-suggestion",onClick:function(){return D(e)},children:e},e)})}),t.length>=l&&(0,n.jsxs)("div",{className:"tag-limit-message",children:["Maximum ",l," tags allowed"]})]})};function v(e,t,s,a,n,i,r){try{var l=e[i](r),c=l.value}catch(e){s(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}var c=a("hiL4o");"function"==typeof SuppressedError&&SuppressedError;var n=a("jr3WH"),o=a("joq15"),g=function(e){var t,s,a,i=e.isOpen,r=e.onClose,l=e.onSave,d=e.availableTags,u=e.postMessage,h=(0,c._)((0,o.useState)(""),2),m=h[0],p=h[1],f=(0,c._)((0,o.useState)(""),2),g=f[0],j=f[1],b=(0,c._)((0,o.useState)([]),2),N=b[0],k=b[1],y=(0,c._)((0,o.useState)(0),2),C=y[0],S=y[1],D=(0,c._)((0,o.useState)(!1),2),_=D[0],T=D[1],E=(0,c._)((0,o.useState)(!1),2),w=E[0],A=E[1];(0,o.useEffect)(function(){i&&u&&(A(!0),u("REQUEST_BOOKMARK_DEFAULTS"))},[i,u]),(0,o.useEffect)(function(){var e=function(e){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){return}if((null==t?void 0:t.type)==="BOOKMARK_DEFAULTS"&&t.data){var s=t.data;p(s.title||""),j(s.description||""),k(s.tags||[]),S(s.timestamp||0),A(!1)}};if(i)return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}},[i]);var O=function(){r(),p(""),j(""),k([]),S(0),A(!1)};return i?(0,n.jsx)("div",{className:"dialog-overlay",children:(0,n.jsxs)("div",{className:"dialog-content add-bookmark-dialog",children:[(0,n.jsxs)("div",{className:"dialog-header",children:[(0,n.jsx)("h3",{children:"Add New Bookmark"}),(0,n.jsx)("p",{className:"dialog-subtitle",children:"Values are auto-populated but can be edited before saving"}),(0,n.jsx)("button",{onClick:O,className:"close-btn",disabled:_,children:"×"})]}),(0,n.jsx)("div",{className:"dialog-body",children:w?(0,n.jsxs)("div",{className:"loading-defaults",children:[(0,n.jsx)("span",{className:"loading-spinner",children:"⏳"}),(0,n.jsx)("span",{children:"Loading metadata..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsxs)("label",{htmlFor:"bookmark-title",children:["Title",(0,n.jsx)("span",{className:"field-hint",children:"✏️ Editable"})]}),(0,n.jsx)("input",{id:"bookmark-title",type:"text",value:m,onChange:function(e){return p(e.target.value)},placeholder:"Bookmark title",disabled:_,autoFocus:!0})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{htmlFor:"bookmark-timestamp",children:"Time"}),(0,n.jsxs)("div",{className:"timestamp-field",children:[(0,n.jsx)("input",{id:"bookmark-timestamp",type:"text",value:(t=Math.floor(C/3600),s=Math.floor(C%3600/60),a=Math.floor(C%60),t>0?`${t}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${s}:${a.toString().padStart(2,"0")}`),readOnly:!0,disabled:_}),(0,n.jsxs)("span",{className:"timestamp-note",children:[C,"s"]})]})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsxs)("label",{htmlFor:"bookmark-description",children:["Description",(0,n.jsx)("span",{className:"field-hint",children:"✏️ Editable"})]}),(0,n.jsx)("textarea",{id:"bookmark-description",value:g,onChange:function(e){return j(e.target.value)},placeholder:"Optional description",rows:3,disabled:_})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsxs)("label",{children:["Tags",(0,n.jsx)("span",{className:"field-hint",children:"✏️ Editable"})]}),(0,n.jsx)(x,{tags:N,onTagsChange:k,availableTags:d,disabled:_})]})]})}),(0,n.jsxs)("div",{className:"dialog-actions",children:[(0,n.jsx)("button",{onClick:function(){var e;return(e=function(){return function(e,t){var s,a,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=l(0),r.throw=l(1),r.return=l(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(c){var o=[l,c];if(s)throw TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(i=0)),i;)try{if(s=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{s=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}}(this,function(e){if(!m.trim())return[2];T(!0);try{l(m.trim(),g.trim(),N,C),r(),p(""),j(""),k([]),S(0)}catch(e){console.error("Error saving bookmark:",e)}finally{T(!1)}return[2]})},function(){var t=this,s=arguments;return new Promise(function(a,n){var i=e.apply(t,s);function r(e){v(i,a,n,r,l,"next",e)}function l(e){v(i,a,n,r,l,"throw",e)}r(void 0)})})()},className:"save-btn",disabled:!m.trim()||_||w,children:_?"Saving...":"Save Bookmark"}),(0,n.jsx)("button",{onClick:O,className:"cancel-btn",disabled:_,children:"Cancel"})]})]})}):null},r=a("gDbdG"),l=a("78RNE"),c=a("hiL4o"),h=a("8IRNY"),n=a("jr3WH"),o=a("joq15"),j=function(e){var t=e.isOpen,s=e.onClose,a=e.availableTags,i=e.postMessage,d=(0,c._)((0,o.useState)("json"),2),u=d[0],m=d[1],p=(0,c._)((0,o.useState)(!0),2),f=p[0],x=p[1],v=(0,c._)((0,o.useState)(!1),2),g=v[0],j=v[1],b=(0,c._)((0,o.useState)(null),2),N=b[0],k=b[1],y=(0,c._)((0,o.useState)(["id","title","timestamp","filepath","description","createdAt","tags"]),2),C=y[0],S=y[1],D=(0,c._)((0,o.useState)(","),2),_=D[0],T=D[1],E=(0,c._)((0,o.useState)(!0),2),w=E[0],A=E[1],O=(0,c._)((0,o.useState)(!1),2),R=O[0],F=O[1],B=(0,c._)((0,o.useState)([]),2),M=B[0],L=B[1],P=(0,c._)((0,o.useState)({start:"",end:""}),2),U=P[0],K=P[1],I=(0,c._)((0,o.useState)(""),2),$=I[0],H=I[1];(0,o.useEffect)(function(){var e=function(e){"EXPORT_RESULT"===e.data.type&&(j(!1),k(e.data.data),e.data.data.success&&e.data.data.data&&q(e.data.data.data,e.data.data.filePath||"export.txt"))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}},[]);var q=function(e,t){var s=new Blob([e],{type:"json"===u?"application/json":"text/csv"}),a=URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)},W=function(e){S(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):(0,h._)(t).concat([e])})},J=function(e){L(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):(0,h._)(t).concat([e])})},V=function(){if(!g){j(!0),k(null);var e=(0,r._)({format:u,includeMetadata:f},"csv"===u&&{selectedFields:C,delimiter:_,includeHeaders:w},R&&{filter:(0,r._)({},M.length>0&&{tags:M},U.start&&U.end&&{dateRange:U},$&&{mediaType:$})});null==i||i("EXPORT_BOOKMARKS",e)}},Q=function(){g||(k(null),s())};return t?(0,n.jsx)("div",{className:"dialog-overlay",children:(0,n.jsxs)("div",{className:"dialog-content export-dialog",children:[(0,n.jsxs)("div",{className:"dialog-header",children:[(0,n.jsx)("h3",{children:"Export Bookmarks"}),(0,n.jsx)("p",{className:"dialog-subtitle",children:"Choose format and options for exporting your bookmarks"}),(0,n.jsx)("button",{onClick:Q,className:"close-btn",disabled:g,children:"×"})]}),(0,n.jsx)("div",{className:"dialog-body",children:N?(0,n.jsx)("div",{className:"export-result",children:N.success?(0,n.jsxs)("div",{className:"success-message",children:[(0,n.jsx)("div",{className:"result-icon",children:"✅"}),(0,n.jsx)("h4",{children:"Export Successful!"}),(0,n.jsxs)("p",{children:["Exported ",N.recordCount," bookmarks"]}),(0,n.jsxs)("p",{children:["File: ",N.filePath]}),(0,n.jsx)("button",{onClick:function(){return k(null)},className:"btn-primary",children:"Export Another"})]}):(0,n.jsxs)("div",{className:"error-message",children:[(0,n.jsx)("div",{className:"result-icon",children:"❌"}),(0,n.jsx)("h4",{children:"Export Failed"}),(0,n.jsx)("p",{children:N.error}),(0,n.jsx)("button",{onClick:function(){return k(null)},className:"btn-primary",children:"Try Again"})]})}):(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),V()},children:[(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsx)("h4",{children:"Export Format"}),(0,n.jsxs)("div",{className:"format-options",children:[(0,n.jsxs)("label",{className:"format-option",children:[(0,n.jsx)("input",{type:"radio",value:"json",checked:"json"===u,onChange:function(e){return m(e.target.value)},disabled:g}),(0,n.jsxs)("div",{className:"format-info",children:[(0,n.jsx)("strong",{children:"JSON"}),(0,n.jsx)("span",{children:"Complete data with metadata, ideal for backup/restore"})]})]}),(0,n.jsxs)("label",{className:"format-option",children:[(0,n.jsx)("input",{type:"radio",value:"csv",checked:"csv"===u,onChange:function(e){return m(e.target.value)},disabled:g}),(0,n.jsxs)("div",{className:"format-info",children:[(0,n.jsx)("strong",{children:"CSV"}),(0,n.jsx)("span",{children:"Tabular format for spreadsheet analysis"})]})]})]})]}),"csv"===u&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsx)("h4",{children:"CSV Options"}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Delimiter"}),(0,n.jsxs)("select",{value:_,onChange:function(e){return T(e.target.value)},disabled:g,children:[(0,n.jsx)("option",{value:",",children:"Comma (,)"}),(0,n.jsx)("option",{value:";",children:"Semicolon (;)"}),(0,n.jsx)("option",{value:"\\t",children:"Tab"})]})]}),(0,n.jsx)("div",{className:"form-field",children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",checked:w,onChange:function(e){return A(e.target.checked)},disabled:g}),"Include column headers"]})}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Fields to Export"}),(0,n.jsx)("div",{className:"field-checkboxes",children:["id","title","timestamp","filepath","description","createdAt","tags"].map(function(e){return(0,n.jsxs)("label",{className:"field-checkbox",children:[(0,n.jsx)("input",{type:"checkbox",checked:C.includes(e),onChange:function(){return W(e)},disabled:g}),e]},e)})})]})]}),(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsx)("h4",{children:"Export Options"}),(0,n.jsx)("div",{className:"form-field",children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",checked:f,onChange:function(e){return x(e.target.checked)},disabled:g}),"Include export metadata"]})})]}),(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsx)("h4",{children:"Filtering"}),(0,n.jsx)("div",{className:"form-field",children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",checked:R,onChange:function(e){return F(e.target.checked)},disabled:g}),"Apply filters to export"]})}),R&&(0,n.jsxs)(n.Fragment,{children:[a.length>0&&(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Filter by Tags"}),(0,n.jsx)("div",{className:"tag-checkboxes",children:a.map(function(e){return(0,n.jsxs)("label",{className:"tag-checkbox",children:[(0,n.jsx)("input",{type:"checkbox",checked:M.includes(e),onChange:function(){return J(e)},disabled:g}),e]},e)})})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Date Range"}),(0,n.jsxs)("div",{className:"date-range",children:[(0,n.jsx)("input",{type:"date",value:U.start,onChange:function(e){return K(function(t){return(0,l._)((0,r._)({},t),{start:e.target.value})})},disabled:g,placeholder:"Start date"}),(0,n.jsx)("span",{children:"to"}),(0,n.jsx)("input",{type:"date",value:U.end,onChange:function(e){return K(function(t){return(0,l._)((0,r._)({},t),{end:e.target.value})})},disabled:g,placeholder:"End date"})]})]}),(0,n.jsxs)("div",{className:"form-field",children:[(0,n.jsx)("label",{children:"Media Type"}),(0,n.jsxs)("select",{value:$,onChange:function(e){return H(e.target.value)},disabled:g,children:[(0,n.jsx)("option",{value:"",children:"All types"}),["Video","Audio","Movie","TV Show","Documentary"].map(function(e){return(0,n.jsx)("option",{value:e,children:e},e)})]})]})]})]}),(0,n.jsxs)("div",{className:"dialog-actions",children:[(0,n.jsx)("button",{type:"button",onClick:Q,className:"btn-secondary",disabled:g,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"btn-primary",disabled:g||"csv"===u&&0===C.length,children:g?"Exporting...":"Export Bookmarks"})]})]})})]})}):null},b=a("3gg67"),N=a("bfvSq"),k=document.getElementById("app");k&&(0,i.createRoot)(k).render((0,n.jsx)(function(){var e,t,s=(0,c._)((0,o.useState)([]),2),a=s[0],i=s[1],h=(0,c._)((0,o.useState)(null),2),m=h[0],v=h[1],k=(0,c._)((0,o.useState)(!1),2),y=k[0],C=k[1],S=(0,c._)((0,o.useState)(""),2),D=S[0],_=S[1],T=(0,c._)((0,o.useState)(""),2),E=T[0],w=T[1],A=(0,c._)((0,o.useState)([]),2),O=A[0],R=A[1],F=(0,c._)((0,o.useState)(void 0),2),B=(F[0],F[1]),M=(0,c._)((0,o.useState)({searchTerm:"",dateRange:{start:"",end:""},tags:[],sortBy:"createdAt",sortDirection:"desc",fileFilter:""}),2),L=M[0],P=M[1],U=(0,c._)((0,o.useState)(),2),K=U[0],I=U[1],$=(0,c._)((0,o.useState)(!1),2),H=$[0],q=$[1],W=(0,c._)((0,o.useState)(!1),2),J=W[0],V=W[1],Q=(0,c._)((0,o.useState)(!1),2),Y=Q[0],G=Q[1],X=window,z=(0,b.default)({bookmarks:a,filters:L,parsedQuery:H?K:void 0}),Z=z.filteredBookmarks,ee=z.resultsCount,et=z.availableFiles,es=z.availableTags,ea=z.analytics,en=(0,N.default)(),ei=en.recentSearches,er=en.customPresets,el=en.addRecentSearch,ec=en.clearRecentSearches,eo=en.saveFilterPreset;en.deleteFilterPreset,en.incrementPresetUsage,(0,o.useEffect)(function(){var e,t,s=function(e){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){return}(null==t?void 0:t.type)==="BOOKMARKS_UPDATED"&&t.data?(i(t.data),m&&!t.data.find(function(e){return e.id===m.id})&&(v(null),C(!1))):(null==t?void 0:t.type)==="CURRENT_FILE_PATH"&&t.data&&B(t.data)};return(null==(e=X.iina)?void 0:e.onMessage)?X.iina.onMessage("message",s):window.addEventListener("message",s),(null==(t=X.iina)?void 0:t.postMessage)&&(X.iina.postMessage("UI_READY",{uiType:"window"}),X.iina.postMessage("REQUEST_FILE_PATH")),function(){var e;(null==(e=X.iina)?void 0:e.onMessage)||window.removeEventListener("message",s)}},[m]);var ed=function(e){var t,s;null==(s=X.iina)||null==(t=s.postMessage)||t.call(s,"DELETE_BOOKMARK",{id:e})},eu=function(e){var t,s;null==(s=X.iina)||null==(t=s.postMessage)||t.call(s,"JUMP_TO_BOOKMARK",{id:e})},eh=function(e){v(e),_(e.title),w(e.description||""),R(e.tags||[]),C(!0)},em=function(e){return new Date(1e3*e).toISOString().substr(11,8)};return(0,n.jsxs)("div",{className:"bookmark-window",children:[(0,n.jsxs)("div",{className:"window-header",children:[(0,n.jsx)("h1",{children:"Manage All Bookmarks"}),(0,n.jsxs)("div",{className:"header-actions",children:[(0,n.jsx)("button",{onClick:function(){V(!0)},className:"add-bookmark-btn",children:"Add Bookmark to Current Video"}),(0,n.jsx)("button",{onClick:function(){return G(!0)},className:"export-btn",children:"Export Bookmarks"})]})]}),(0,n.jsx)(g,{isOpen:J,onClose:function(){return V(!1)},onSave:function(e,t,s,a){var n,i;null==(i=X.iina)||null==(n=i.postMessage)||n.call(i,"ADD_BOOKMARK",{title:e,description:t,tags:s,timestamp:a})},availableTags:es,postMessage:null==(e=X.iina)?void 0:e.postMessage}),(0,n.jsx)(j,{isOpen:Y,onClose:function(){return G(!1)},availableTags:es,postMessage:null==(t=X.iina)?void 0:t.postMessage}),(0,n.jsx)(p,{onApplyPreset:function(e){P(function(t){return(0,r._)({},t,e)})},onSaveCurrentAsPreset:function(e,t){eo(e,t,L)},currentFilters:L,customPresets:er,recentSearches:ei,onClearHistory:ec}),(0,n.jsxs)("div",{className:"filter-row",children:[(0,n.jsxs)("div",{className:"advanced-search-toggle",onClick:function(){return q(!H)},children:[(0,n.jsx)("span",{className:`toggle-icon ${H?"expanded":""}`,children:"▶"}),(0,n.jsx)("span",{children:"Advanced Search"})]}),ea.hasActiveFilters&&(0,n.jsxs)("div",{className:"filter-analytics",children:[(0,n.jsxs)("div",{className:"analytics-item",children:[(0,n.jsx)("span",{className:"analytics-icon",children:"\uD83D\uDCCA"}),(0,n.jsx)("span",{className:"analytics-value",children:ea.filteredCount}),(0,n.jsxs)("span",{children:["of ",ea.totalBookmarks]})]}),ea.reductionPercentage>0&&(0,n.jsxs)("div",{className:`analytics-item reduction-percentage ${ea.reductionPercentage>75?"high-reduction":""}`,children:[(0,n.jsx)("span",{className:"analytics-icon",children:"\uD83D\uDCC9"}),(0,n.jsxs)("span",{className:"analytics-value",children:[ea.reductionPercentage,"%"]}),(0,n.jsx)("span",{children:"filtered out"})]})]})]}),H?(0,n.jsx)(u.default,{onSearchChange:function(e,t){I(t),P(function(t){return(0,l._)((0,r._)({},t),{searchTerm:e})}),e.trim()&&el(e)},availableTags:es,availableFiles:et,recentSearches:ei}):(0,n.jsx)(d.default,{onFilterChange:P,availableTags:es,availableFiles:et,resultsCount:ee,showAdvanced:!0,initialFilters:L}),(0,n.jsxs)("div",{className:"content-area",children:[(0,n.jsx)("div",{className:"bookmark-list-panel",children:0===Z.length?(0,n.jsx)("p",{className:"empty-state-text",children:"No bookmarks match your current filters."}):Z.map(function(e){return(0,n.jsxs)("div",{className:`bookmark-entry ${(null==m?void 0:m.id)===e.id?"selected":""}`,onClick:function(){return v(e)},children:[(0,n.jsx)("h4",{children:(0,n.jsx)(f.default,{text:e.title,searchTerms:L.searchTerm,caseSensitive:!1})}),(0,n.jsxs)("p",{className:"filepath",title:e.filepath,children:[e.filepath.split("/").pop()," (",em(e.timestamp),")"]}),e.tags&&e.tags.length>0&&(0,n.jsx)("div",{className:"bookmark-tags-small",children:e.tags.map(function(e){return(0,n.jsx)("span",{className:"bookmark-tag-small",children:e},e)})}),(0,n.jsxs)("p",{className:"created-date-small",children:["Added: ",new Date(e.createdAt).toLocaleDateString()]})]},e.id)})}),m&&(0,n.jsx)("div",{className:"bookmark-detail-panel",children:y?(0,n.jsxs)("div",{className:"edit-form",children:[(0,n.jsx)("h3",{children:"Edit Bookmark"}),(0,n.jsx)("input",{type:"text",value:D,onChange:function(e){return _(e.target.value)},placeholder:"Title"}),(0,n.jsx)("textarea",{value:E,onChange:function(e){return w(e.target.value)},placeholder:"Description"}),(0,n.jsx)(x,{tags:O,onTagsChange:R,availableTags:es}),(0,n.jsxs)("div",{className:"edit-actions",children:[(0,n.jsx)("button",{onClick:function(){if(m){var e,t;null==(t=X.iina)||null==(e=t.postMessage)||e.call(t,"UPDATE_BOOKMARK",{id:m.id,data:{title:D,description:E,tags:O}}),C(!1),v(function(e){return e?(0,l._)((0,r._)({},e),{title:D,description:E,tags:O}):null}),i(function(e){return e.map(function(e){return e.id===m.id?(0,l._)((0,r._)({},e),{title:D,description:E,tags:O}):e})})}},className:"save-btn",children:"Save Changes"}),(0,n.jsx)("button",{onClick:function(){return C(!1)},className:"cancel-btn",children:"Cancel"})]})]}):(0,n.jsxs)("div",{className:"details-view",children:[(0,n.jsx)("h3",{children:(0,n.jsx)(f.default,{text:m.title,searchTerms:L.searchTerm,caseSensitive:!1})}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"File:"})," ",(0,n.jsx)("span",{title:m.filepath,children:m.filepath})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Time:"})," ",em(m.timestamp)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Description:"}),(0,n.jsx)(f.default,{text:m.description||"N/A",searchTerms:L.searchTerm,caseSensitive:!1})]}),m.tags&&m.tags.length>0&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Tags:"})," ",m.tags.join(", ")]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Created:"})," ",new Date(m.createdAt).toLocaleString()]}),(0,n.jsxs)("div",{className:"detail-actions",children:[(0,n.jsx)("button",{onClick:function(){return eu(m.id)},className:"jump-btn",children:"Jump To"}),(0,n.jsx)("button",{onClick:function(){return eh(m)},className:"edit-btn",children:"Edit"}),(0,n.jsx)("button",{onClick:function(){return ed(m.id)},className:"delete-btn-detail",children:"Delete"})]})]})}),!m&&Z.length>0&&(0,n.jsx)("div",{className:"bookmark-detail-panel placeholder-panel",children:(0,n.jsx)("p",{children:"Select a bookmark from the list to view or edit its details."})})]})]})},{}))}();
//# sourceMappingURL=window.cf37436c.js.map
