import"./window.d761c722.js";import"./window.bbe6bed8.js";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},t={},a=e.parcelRequire9a9a;null==a&&((a=function(e){if(e in s)return s[e].exports;if(e in t){var a=t[e];delete t[e];var i={id:e,exports:{}};return s[e]=i,a.call(i.exports,i,i.exports),i.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,s){t[e]=s},e.parcelRequire9a9a=a),a.register;var i=a("YgFEM");a("18qrn");var r=a("d677Q"),n=a("3ruKn"),l=a("6r7ZQ"),i=a("YgFEM"),c=a("18qrn"),o=a("8YcBG"),d=a("jvi9v"),i=a("YgFEM"),c=a("18qrn");let h=[{id:"recent",name:"Recent",description:"Bookmarks created today",filters:{dateRange:{start:new Date().toISOString().split("T")[0],end:""},sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDD52"},{id:"this-week",name:"This Week",description:"Bookmarks from the past 7 days",filters:{dateRange:{start:new Date(Date.now()-6048e5).toISOString().split("T")[0],end:""},sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDCC5"},{id:"untagged",name:"Untagged",description:"Bookmarks without any tags",filters:{searchTerm:"",tags:[],sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83C\uDFF7️"},{id:"favorites",name:"Favorites",description:"Bookmarks with favorite tag",filters:{tags:["favorite"],sortBy:"createdAt",sortDirection:"desc"},icon:"⭐"},{id:"no-description",name:"Need Description",description:"Bookmarks missing descriptions",filters:{searchTerm:"",sortBy:"createdAt",sortDirection:"desc"},icon:"\uD83D\uDCDD"}];var m=({onApplyPreset:e,onSaveCurrentAsPreset:s,currentFilters:t,customPresets:a=[],recentSearches:r=[],onClearHistory:n,className:l=""})=>{let[o,d]=(0,c.useState)(!1),[m,u]=(0,c.useState)(""),[p,x]=(0,c.useState)(""),[g,v]=(0,c.useState)("presets"),j=[...h,...a],N=(0,c.useCallback)(s=>{e(s.filters)},[e]),k=(0,c.useCallback)(()=>{m.trim()&&(s(m.trim(),p.trim()),u(""),x(""),d(!1))},[m,p,s]),f=(0,c.useCallback)(e=>{let s=e.filters;return(void 0===s.searchTerm||s.searchTerm===t.searchTerm)&&(!s.sortBy||s.sortBy===t.sortBy)&&(!s.sortDirection||s.sortDirection===t.sortDirection)&&(!s.tags||JSON.stringify(s.tags)===JSON.stringify(t.tags))&&(void 0===s.fileFilter||s.fileFilter===t.fileFilter)},[t]),D=(0,c.useCallback)(()=>""!==t.searchTerm||""!==t.dateRange.start||""!==t.dateRange.end||t.tags.length>0||""!==t.fileFilter||"createdAt"!==t.sortBy||"desc"!==t.sortDirection,[t]),y=(0,c.useCallback)(s=>{e({searchTerm:s})},[e]);return(0,i.jsxs)("div",{className:`filter-presets ${l}`,children:[(0,i.jsxs)("div",{className:"presets-section",children:[(0,i.jsxs)("div",{className:"section-header",onClick:()=>v("presets"===g?null:"presets"),children:[(0,i.jsx)("span",{className:"section-icon",children:"presets"===g?"▼":"▶"}),(0,i.jsx)("span",{className:"section-title",children:"Quick Filters"}),(0,i.jsxs)("span",{className:"section-count",children:["(",j.length,")"]})]}),"presets"===g&&(0,i.jsxs)("div",{className:"presets-content",children:[(0,i.jsx)("div",{className:"preset-grid",children:j.map(e=>(0,i.jsxs)("button",{className:`preset-button ${f(e)?"active":""}`,onClick:()=>N(e),title:e.description,children:[e.icon&&(0,i.jsx)("span",{className:"preset-icon",children:e.icon}),(0,i.jsx)("span",{className:"preset-name",children:e.name})]},e.id))}),D()&&(0,i.jsx)("div",{className:"save-preset-section",children:o?(0,i.jsxs)("div",{className:"save-preset-dialog",children:[(0,i.jsx)("input",{type:"text",placeholder:"Preset name",value:m,onChange:e=>u(e.target.value),className:"preset-name-input"}),(0,i.jsx)("input",{type:"text",placeholder:"Description (optional)",value:p,onChange:e=>x(e.target.value),className:"preset-description-input"}),(0,i.jsxs)("div",{className:"dialog-actions",children:[(0,i.jsx)("button",{onClick:k,className:"save-btn",disabled:!m.trim(),children:"Save"}),(0,i.jsx)("button",{onClick:()=>d(!1),className:"cancel-btn",children:"Cancel"})]})]}):(0,i.jsx)("button",{className:"save-preset-trigger",onClick:()=>d(!0),children:"\uD83D\uDCBE Save Current Filters as Preset"})})]})]}),r.length>0&&(0,i.jsxs)("div",{className:"history-section",children:[(0,i.jsxs)("div",{className:"section-header",onClick:()=>v("history"===g?null:"history"),children:[(0,i.jsx)("span",{className:"section-icon",children:"history"===g?"▼":"▶"}),(0,i.jsx)("span",{className:"section-title",children:"Recent Searches"}),(0,i.jsxs)("span",{className:"section-count",children:["(",r.length,")"]})]}),"history"===g&&(0,i.jsxs)("div",{className:"history-content",children:[(0,i.jsx)("div",{className:"history-list",children:r.slice(0,5).map((e,s)=>(0,i.jsxs)("button",{className:"history-item",onClick:()=>y(e),title:`Apply search: ${e}`,children:[(0,i.jsx)("span",{className:"history-icon",children:"\uD83D\uDD0D"}),(0,i.jsx)("span",{className:"history-text",children:e})]},s))}),n&&(0,i.jsx)("button",{className:"clear-history-btn",onClick:n,children:"\uD83D\uDDD1️ Clear History"})]})]})]})},u=a("mKhnF"),p=a("8zbWC"),x=a("cEMf7");let g=document.getElementById("app");g&&(0,r.createRoot)(g).render((0,i.jsx)(()=>{let[e,s]=(0,c.useState)([]),[t,a]=(0,c.useState)(null),[r,h]=(0,c.useState)(!1),[g,v]=(0,c.useState)(""),[j,N]=(0,c.useState)(""),[k,f]=(0,c.useState)(void 0),[D,y]=(0,c.useState)({searchTerm:"",dateRange:{start:"",end:""},tags:[],sortBy:"createdAt",sortDirection:"desc",fileFilter:""}),[C,b]=(0,c.useState)(),[S,w]=(0,c.useState)(!1),T=window,{filteredBookmarks:A,resultsCount:F,availableFiles:B,availableTags:E,analytics:_}=(0,p.default)({bookmarks:e,filters:D,parsedQuery:S?C:void 0}),{recentSearches:R,customPresets:M,addRecentSearch:O,clearRecentSearches:P,saveFilterPreset:K,deleteFilterPreset:U,incrementPresetUsage:H}=(0,x.default)();(0,c.useEffect)(()=>{var e,i;let r=e=>{let i=e.data;if("string"==typeof e.data)try{i=JSON.parse(e.data)}catch(e){return}(null==i?void 0:i.type)==="BOOKMARKS_UPDATED"&&i.data?(s(i.data),t&&!i.data.find(e=>e.id===t.id)&&(a(null),h(!1))):(null==i?void 0:i.type)==="CURRENT_FILE_PATH"&&i.data&&f(i.data)};return(null==(e=T.iina)?void 0:e.onMessage)?T.iina.onMessage("message",r):window.addEventListener("message",r),(null==(i=T.iina)?void 0:i.postMessage)&&(T.iina.postMessage("UI_READY",{uiType:"window"}),T.iina.postMessage("REQUEST_FILE_PATH")),()=>{var e;(null==(e=T.iina)?void 0:e.onMessage)||window.removeEventListener("message",r)}},[t]);let L=e=>{var s,t;null==(t=T.iina)||null==(s=t.postMessage)||s.call(t,"DELETE_BOOKMARK",{id:e})},I=e=>{var s,t;null==(t=T.iina)||null==(s=t.postMessage)||s.call(t,"JUMP_TO_BOOKMARK",{id:e})},$=e=>{a(e),v(e.title),N(e.description||""),h(!0)},q=e=>new Date(1e3*e).toISOString().substr(11,8);return(0,i.jsxs)("div",{className:"bookmark-window",children:[(0,i.jsxs)("div",{className:"window-header",children:[(0,i.jsx)("h1",{children:"Manage All Bookmarks"}),(0,i.jsx)("div",{className:"header-actions",children:(0,i.jsx)("button",{onClick:()=>{var e,s;null==(s=T.iina)||null==(e=s.postMessage)||e.call(s,"ADD_BOOKMARK",{title:`New Bookmark ${new Date().toLocaleTimeString()}`,timestamp:null,description:"Added from bookmark manager window"})},className:"add-bookmark-btn",children:"Add Bookmark to Current Video"})})]}),(0,i.jsx)(m,{onApplyPreset:e=>{y(s=>(0,n._)({},s,e))},onSaveCurrentAsPreset:(e,s)=>{K(e,s,D)},currentFilters:D,customPresets:M,recentSearches:R,onClearHistory:P}),(0,i.jsxs)("div",{className:"filter-row",children:[(0,i.jsxs)("div",{className:"advanced-search-toggle",onClick:()=>w(!S),children:[(0,i.jsx)("span",{className:`toggle-icon ${S?"expanded":""}`,children:"▶"}),(0,i.jsx)("span",{children:"Advanced Search"})]}),_.hasActiveFilters&&(0,i.jsxs)("div",{className:"filter-analytics",children:[(0,i.jsxs)("div",{className:"analytics-item",children:[(0,i.jsx)("span",{className:"analytics-icon",children:"\uD83D\uDCCA"}),(0,i.jsx)("span",{className:"analytics-value",children:_.filteredCount}),(0,i.jsxs)("span",{children:["of ",_.totalBookmarks]})]}),_.reductionPercentage>0&&(0,i.jsxs)("div",{className:`analytics-item reduction-percentage ${_.reductionPercentage>75?"high-reduction":""}`,children:[(0,i.jsx)("span",{className:"analytics-icon",children:"\uD83D\uDCC9"}),(0,i.jsxs)("span",{className:"analytics-value",children:[_.reductionPercentage,"%"]}),(0,i.jsx)("span",{children:"filtered out"})]})]})]}),S?(0,i.jsx)(d.default,{onSearchChange:(e,s)=>{b(s),y(s=>(0,l._)((0,n._)({},s),{searchTerm:e})),e.trim()&&O(e)},availableTags:E,availableFiles:B,recentSearches:R}):(0,i.jsx)(o.default,{onFilterChange:y,availableTags:E,availableFiles:B,resultsCount:F,showAdvanced:!0,initialFilters:D}),(0,i.jsxs)("div",{className:"content-area",children:[(0,i.jsx)("div",{className:"bookmark-list-panel",children:0===A.length?(0,i.jsx)("p",{className:"empty-state-text",children:"No bookmarks match your current filters."}):A.map(e=>(0,i.jsxs)("div",{className:`bookmark-entry ${(null==t?void 0:t.id)===e.id?"selected":""}`,onClick:()=>a(e),children:[(0,i.jsx)("h4",{children:(0,i.jsx)(u.default,{text:e.title,searchTerms:D.searchTerm,caseSensitive:!1})}),(0,i.jsxs)("p",{className:"filepath",title:e.filepath,children:[e.filepath.split("/").pop()," (",q(e.timestamp),")"]}),e.tags&&e.tags.length>0&&(0,i.jsx)("div",{className:"bookmark-tags-small",children:e.tags.map(e=>(0,i.jsx)("span",{className:"bookmark-tag-small",children:e},e))}),(0,i.jsxs)("p",{className:"created-date-small",children:["Added: ",new Date(e.createdAt).toLocaleDateString()]})]},e.id))}),t&&(0,i.jsx)("div",{className:"bookmark-detail-panel",children:r?(0,i.jsxs)("div",{className:"edit-form",children:[(0,i.jsx)("h3",{children:"Edit Bookmark"}),(0,i.jsx)("input",{type:"text",value:g,onChange:e=>v(e.target.value),placeholder:"Title"}),(0,i.jsx)("textarea",{value:j,onChange:e=>N(e.target.value),placeholder:"Description"}),(0,i.jsxs)("div",{className:"edit-actions",children:[(0,i.jsx)("button",{onClick:()=>{if(t){var e,i;null==(i=T.iina)||null==(e=i.postMessage)||e.call(i,"UPDATE_BOOKMARK",{id:t.id,data:{title:g,description:j}}),h(!1),a(e=>e?(0,l._)((0,n._)({},e),{title:g,description:j}):null),s(e=>e.map(e=>e.id===t.id?(0,l._)((0,n._)({},e),{title:g,description:j}):e))}},className:"save-btn",children:"Save Changes"}),(0,i.jsx)("button",{onClick:()=>h(!1),className:"cancel-btn",children:"Cancel"})]})]}):(0,i.jsxs)("div",{className:"details-view",children:[(0,i.jsx)("h3",{children:(0,i.jsx)(u.default,{text:t.title,searchTerms:D.searchTerm,caseSensitive:!1})}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"File:"})," ",(0,i.jsx)("span",{title:t.filepath,children:t.filepath})]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Time:"})," ",q(t.timestamp)]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Description:"}),(0,i.jsx)(u.default,{text:t.description||"N/A",searchTerms:D.searchTerm,caseSensitive:!1})]}),t.tags&&t.tags.length>0&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Tags:"})," ",t.tags.join(", ")]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Created:"})," ",new Date(t.createdAt).toLocaleString()]}),(0,i.jsxs)("div",{className:"detail-actions",children:[(0,i.jsx)("button",{onClick:()=>I(t.id),className:"jump-btn",children:"Jump To"}),(0,i.jsx)("button",{onClick:()=>$(t),className:"edit-btn",children:"Edit"}),(0,i.jsx)("button",{onClick:()=>L(t.id),className:"delete-btn-detail",children:"Delete"})]})]})}),!t&&A.length>0&&(0,i.jsx)("div",{className:"bookmark-detail-panel placeholder-panel",children:(0,i.jsx)("p",{children:"Select a bookmark from the list to view or edit its details."})})]})]})},{}));
//# sourceMappingURL=window.e7eb4dc1.js.map
