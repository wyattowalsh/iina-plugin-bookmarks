import"../window/window.d761c722.js";import"../window/window.bbe6bed8.js";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},s={},t=e.parcelRequire9a9a;null==t&&((t=function(e){if(e in a)return a[e].exports;if(e in s){var t=s[e];delete s[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,a){s[e]=a},e.parcelRequire9a9a=t),t.register;var r=t("YgFEM");t("18qrn");var i=t("d677Q"),l=t("3ruKn"),n=t("6r7ZQ"),r=t("YgFEM"),o=t("18qrn"),d=t("8YcBG"),c=t("jvi9v"),m=t("mKhnF"),u=t("8zbWC"),p=t("cEMf7");let h=document.getElementById("app");h&&(0,i.createRoot)(h).render((0,r.jsx)(()=>{let[e,a]=(0,o.useState)([]),[s,t]=(0,o.useState)(void 0),[i,h]=(0,o.useState)({searchTerm:"",dateRange:{start:"",end:""},tags:[],sortBy:"createdAt",sortDirection:"desc",fileFilter:""}),[g,v]=(0,o.useState)(),[f,k]=(0,o.useState)(!1),x=window,{filteredBookmarks:b,resultsCount:j,availableTags:w}=(0,u.default)({bookmarks:e,filters:i,parsedQuery:f?g:void 0}),{recentSearches:N,addRecentSearch:E}=(0,p.default)();(0,o.useEffect)(()=>{var e,s;let r=e=>{let s=e.data;if("string"==typeof e.data)try{s=JSON.parse(e.data)}catch(e){return}(null==s?void 0:s.type)==="BOOKMARKS_UPDATED"&&s.data?a(s.data):(null==s?void 0:s.type)==="CURRENT_FILE_PATH"&&s.data&&t(s.data)};return(null==(e=x.iina)?void 0:e.onMessage)?x.iina.onMessage("message",r):window.addEventListener("message",r),(null==(s=x.iina)?void 0:s.postMessage)&&x.iina.postMessage("UI_READY",{uiType:"sidebar"}),()=>{var e;(null==(e=x.iina)?void 0:e.onMessage)||window.removeEventListener("message",r)}},[]),(0,o.useEffect)(()=>{var e;!s&&(null==(e=x.iina)?void 0:e.postMessage)&&x.iina.postMessage("REQUEST_FILE_PATH")},[s]);let S=e=>{var a,s;null==(s=x.iina)||null==(a=s.postMessage)||a.call(s,"DELETE_BOOKMARK",{id:e})},T=e=>{var a,s;null==(s=x.iina)||null==(a=s.postMessage)||a.call(s,"JUMP_TO_BOOKMARK",{id:e})},M=e=>new Date(e).toLocaleDateString();return(0,r.jsxs)("div",{className:"bookmark-sidebar",children:[(0,r.jsxs)("div",{className:"sidebar-header",children:[(0,r.jsx)("h2",{children:"Bookmarks (Current File)"}),(0,r.jsx)("button",{onClick:()=>{var e,a;null==(a=x.iina)||null==(e=a.postMessage)||e.call(a,"ADD_BOOKMARK",{title:`New Sidebar Bookmark ${new Date().toLocaleTimeString()}`,timestamp:null,description:"Added from sidebar"})},className:"add-bookmark-btn",children:"Add Bookmark"})]}),(0,r.jsx)("div",{className:"filter-row",children:(0,r.jsxs)("div",{className:"advanced-search-toggle",onClick:()=>k(!f),children:[(0,r.jsx)("span",{className:`toggle-icon ${f?"expanded":""}`,children:"▶"}),(0,r.jsx)("span",{children:"Advanced"})]})}),f?(0,r.jsx)(c.default,{onSearchChange:(e,a)=>{v(a),h(a=>(0,n._)((0,l._)({},a),{searchTerm:e})),e.trim()&&E(e)},availableTags:w,recentSearches:N,placeholder:"Search... (try: tag:work)",className:"compact"}):(0,r.jsx)(d.default,{onFilterChange:h,availableTags:w,resultsCount:j,compact:!0,initialFilters:i}),(0,r.jsxs)("ul",{className:"bookmark-list",children:[b.map(e=>(0,r.jsxs)("li",{className:"bookmark-item",children:[(0,r.jsxs)("div",{className:"bookmark-content",onClick:()=>T(e.id),children:[(0,r.jsx)("h4",{className:"bookmark-title",children:(0,r.jsx)(m.default,{text:e.title,searchTerms:i.searchTerm,caseSensitive:!1})}),(0,r.jsx)("p",{className:"bookmark-description",children:(0,r.jsx)(m.default,{text:e.description||"",searchTerms:i.searchTerm,caseSensitive:!1})}),e.tags&&e.tags.length>0&&(0,r.jsx)("div",{className:"bookmark-tags",children:e.tags.map(e=>(0,r.jsx)("span",{className:"bookmark-tag",children:e},e))}),(0,r.jsxs)("div",{className:"bookmark-meta",children:[(0,r.jsx)("span",{className:"timestamp",children:new Date(1e3*(e.timestamp||0)).toISOString().substr(11,8)}),(0,r.jsx)("span",{className:"created-date",children:M(e.createdAt)})]})]}),(0,r.jsx)("button",{onClick:()=>S(e.id),className:"delete-btn",children:"×"})]},e.id)),0===b.length&&(0,r.jsx)("p",{className:"empty-state",children:"No bookmarks match your current filters."})]})]})},{}));
//# sourceMappingURL=sidebar.487b0289.js.map
