!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},s={},t=e.parcelRequire9a9a;null==t&&((t=function(e){if(e in a)return a[e].exports;if(e in s){var t=s[e];delete s[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,a){s[e]=a},e.parcelRequire9a9a=t),t.register;var n=t("jr3WH");t("joq15");var r=t("fEatv"),i=t("gDbdG"),l=t("78RNE"),o=t("hiL4o"),n=t("jr3WH"),c=t("joq15"),d=t("c04QX"),u=t("blyWw"),m=t("7yYUG"),f=t("3gg67"),g=t("bfvSq"),h=document.getElementById("app");h&&(0,r.createRoot)(h).render((0,n.jsx)(function(){var e=(0,o._)((0,c.useState)([]),2),a=e[0],s=e[1],t=(0,o._)((0,c.useState)(void 0),2),r=t[0],h=t[1],p=(0,o._)((0,c.useState)({searchTerm:"",dateRange:{start:"",end:""},tags:[],sortBy:"createdAt",sortDirection:"desc",fileFilter:""}),2),v=p[0],k=p[1],x=(0,o._)((0,c.useState)(),2),b=x[0],j=x[1],N=(0,o._)((0,c.useState)(!1),2),S=N[0],T=N[1],E=window,_=(0,f.default)({bookmarks:a,filters:v,parsedQuery:S?b:void 0}),w=_.filteredBookmarks,y=_.resultsCount,M=_.availableTags,A=(0,g.default)(),D=A.recentSearches,O=A.addRecentSearch;(0,c.useEffect)(function(){var e,a,t=function(e){var a=e.data;if("string"==typeof e.data)try{a=JSON.parse(e.data)}catch(e){return}(null==a?void 0:a.type)==="BOOKMARKS_UPDATED"&&a.data?s(a.data):(null==a?void 0:a.type)==="CURRENT_FILE_PATH"&&a.data&&h(a.data)};return(null==(e=E.iina)?void 0:e.onMessage)?E.iina.onMessage("message",t):window.addEventListener("message",t),(null==(a=E.iina)?void 0:a.postMessage)&&E.iina.postMessage("UI_READY",{uiType:"sidebar"}),function(){var e;(null==(e=E.iina)?void 0:e.onMessage)||window.removeEventListener("message",t)}},[]),(0,c.useEffect)(function(){var e;!r&&(null==(e=E.iina)?void 0:e.postMessage)&&E.iina.postMessage("REQUEST_FILE_PATH")},[r]);var R=function(e){var a,s;null==(s=E.iina)||null==(a=s.postMessage)||a.call(s,"DELETE_BOOKMARK",{id:e})},C=function(e){var a,s;null==(s=E.iina)||null==(a=s.postMessage)||a.call(s,"JUMP_TO_BOOKMARK",{id:e})};return(0,n.jsxs)("div",{className:"bookmark-sidebar",children:[(0,n.jsxs)("div",{className:"sidebar-header",children:[(0,n.jsx)("h2",{children:"Bookmarks (Current File)"}),(0,n.jsx)("button",{onClick:function(){var e,a;null==(a=E.iina)||null==(e=a.postMessage)||e.call(a,"ADD_BOOKMARK",{title:`New Sidebar Bookmark ${new Date().toLocaleTimeString()}`,timestamp:null,description:"Added from sidebar"})},className:"add-bookmark-btn",children:"Add Bookmark"})]}),(0,n.jsx)("div",{className:"filter-row",children:(0,n.jsxs)("div",{className:"advanced-search-toggle",onClick:function(){return T(!S)},children:[(0,n.jsx)("span",{className:`toggle-icon ${S?"expanded":""}`,children:"▶"}),(0,n.jsx)("span",{children:"Advanced"})]})}),S?(0,n.jsx)(u.default,{onSearchChange:function(e,a){j(a),k(function(a){return(0,l._)((0,i._)({},a),{searchTerm:e})}),e.trim()&&O(e)},availableTags:M,recentSearches:D,placeholder:"Search... (try: tag:work)",className:"compact"}):(0,n.jsx)(d.default,{onFilterChange:k,availableTags:M,resultsCount:y,compact:!0,initialFilters:v}),(0,n.jsxs)("ul",{className:"bookmark-list",children:[w.map(function(e){return(0,n.jsxs)("li",{className:"bookmark-item",children:[(0,n.jsxs)("div",{className:"bookmark-content",onClick:function(){return C(e.id)},children:[(0,n.jsx)("h4",{className:"bookmark-title",children:(0,n.jsx)(m.default,{text:e.title,searchTerms:v.searchTerm,caseSensitive:!1})}),(0,n.jsx)("p",{className:"bookmark-description",children:(0,n.jsx)(m.default,{text:e.description||"",searchTerms:v.searchTerm,caseSensitive:!1})}),e.tags&&e.tags.length>0&&(0,n.jsx)("div",{className:"bookmark-tags",children:e.tags.map(function(e){return(0,n.jsx)("span",{className:"bookmark-tag",children:e},e)})}),(0,n.jsxs)("div",{className:"bookmark-meta",children:[(0,n.jsx)("span",{className:"timestamp",children:new Date(1e3*(e.timestamp||0)).toISOString().substr(11,8)}),(0,n.jsx)("span",{className:"created-date",children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,n.jsx)("button",{onClick:function(){return R(e.id)},className:"delete-btn",children:"×"})]},e.id)}),0===w.length&&(0,n.jsx)("p",{className:"empty-state",children:"No bookmarks match your current filters."})]})]})},{}))}();
//# sourceMappingURL=sidebar.e0c933fa.js.map
