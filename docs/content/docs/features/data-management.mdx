---
title: Data Management
description: Enterprise-grade export/import system with validation, batch processing, and multiple format support
icon: Database
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Step, Steps } from 'fumadocs-ui/components/steps';
import { Tabs, Tab } from 'fumadocs-ui/components/tabs';
import { Card, Cards } from 'fumadocs-ui/components/card';
import { CodeBlock, Pre } from 'fumadocs-ui/components/codeblock';

# Enterprise Data Management

Professional-grade data management system featuring comprehensive export/import capabilities, advanced validation, batch processing, and multi-format support for enterprise workflows.

## üì§ Export System

<Tabs items={['JSON Export', 'CSV Export', 'Advanced Options', 'Batch Processing']}>
  <Tab value="JSON Export">
    ### JSON Export Format
    
    The JSON format provides complete data preservation with metadata:
    
    ```typescript
    interface JSONExportFormat {
      metadata?: {
        exportedAt: string;           // ISO 8601 timestamp
        totalRecords: number;         // Count of exported bookmarks
        exportOptions: ExportOptions; // Configuration used
        version: string;              // Schema version
      };
      bookmarks: BookmarkData[];      // Array of bookmark objects
    }
    ```
    
    <div className="space-y-4">
      <div className="p-4 border rounded-lg">
        <h4 className="font-semibold mb-2">‚úÖ Advantages</h4>
        <ul className="text-sm space-y-1">
          <li>‚Ä¢ **Complete data preservation** - All fields retained</li>
          <li>‚Ä¢ **Type safety** - Maintains TypeScript interfaces</li>
          <li>‚Ä¢ **Metadata inclusion** - Export context and versioning</li>
          <li>‚Ä¢ **Easy re-import** - Native format compatibility</li>
          <li>‚Ä¢ **Hierarchical structure** - Nested data support</li>
        </ul>
      </div>
      
      <div className="p-4 bg-gray-50 dark:bg-gray-900 rounded-lg">
        <h5 className="font-semibold mb-2">Example JSON Export</h5>
        <pre className="text-xs overflow-x-auto">
{`{
  "metadata": {
    "exportedAt": "2024-01-15T10:30:45.123Z",
    "totalRecords": 25,
    "exportOptions": {
      "format": "json",
      "includeMetadata": true,
      "filter": {
        "tags": ["favorite", "study"],
        "dateRange": {
          "start": "2024-01-01",
          "end": "2024-01-15"
        }
      }
    },
    "version": "1.0.0"
  },
  "bookmarks": [
    {
      "id": "bookmark_1695740123456_a1b2c3",
      "title": "Inception: Dream Layer Explanation",
      "timestamp": 3420.8,
      "filepath": "/Movies/Inception.2010.BluRay.1080p.mp4",
      "description": "Multi-level dream architecture explanation scene",
      "createdAt": "2024-01-10T14:22:33.456Z",
      "tags": ["sci-fi", "explanation", "favorite", "plot-critical"]
    }
  ]
}`}
        </pre>
      </div>
    </div>
    
    <Callout type="tip" title="JSON Best Practices">
      JSON export is **recommended for backups and system migrations** due to complete data preservation and easy re-import capabilities.
    </Callout>
  </Tab>
  
  <Tab value="CSV Export">
    ### CSV Export Format
    
    CSV format provides tabular data compatibility with spreadsheet applications:
    
    ```typescript
    interface CSVExportOptions extends ExportOptions {
      selectedFields: string[];         // Fields to include
      delimiter: ',' | ';' | '\t';     // Field separator
      includeHeaders: boolean;          // Column headers
      quoteStyle: 'minimal' | 'all';   // Quote handling
    }
    ```
    
    <div className="space-y-4">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div className="p-4 border rounded-lg">
          <h4 className="font-semibold mb-2">‚úÖ Advantages</h4>
          <ul className="text-sm space-y-1">
            <li>‚Ä¢ **Universal compatibility** - Works with Excel, Google Sheets</li>
            <li>‚Ä¢ **Compact size** - Smaller file sizes</li>
            <li>‚Ä¢ **Human readable** - Easy manual inspection</li>
            <li>‚Ä¢ **Customizable fields** - Select specific columns</li>
            <li>‚Ä¢ **Delimiter options** - Locale-appropriate separators</li>
          </ul>
        </div>
        
        <div className="p-4 border rounded-lg">
          <h4 className="font-semibold mb-2">‚ö†Ô∏è Limitations</h4>
          <ul className="text-sm space-y-1">
            <li>‚Ä¢ **Flattened structure** - Complex data simplified</li>
            <li>‚Ä¢ **Tag serialization** - Arrays become delimited strings</li>
            <li>‚Ä¢ **No metadata** - Context information lost</li>
            <li>‚Ä¢ **Type information** - All data becomes text</li>
            <li>‚Ä¢ **Encoding issues** - Special characters may need escaping</li>
          </ul>
        </div>
      </div>
      
      <div className="p-4 bg-gray-50 dark:bg-gray-900 rounded-lg">
        <h5 className="font-semibold mb-2">Example CSV Export</h5>
        <pre className="text-xs overflow-x-auto">
{`id,title,timestamp,filepath,description,createdAt,tags
bookmark_1695740123456_a1b2c3,"Inception: Dream Layer Explanation","3420.8 (00:57:00)","/Movies/Inception.2010.BluRay.1080p.mp4","Multi-level dream architecture explanation scene","2024-01-10T14:22:33.456Z","sci-fi;explanation;favorite;plot-critical"
bookmark_1695745678901_b2c3d4,"The Matrix: Red Pill Scene","1847.2 (00:30:47)","/Movies/The.Matrix.1999.1080p.mp4","Neo's choice between reality and illusion","2024-01-11T09:15:22.789Z","sci-fi;pivotal-moment;philosophy;choice"
bookmark_1695750234567_c3d4e5,"Interstellar: Tesseract Sequence","8965.5 (02:29:25)","/Movies/Interstellar.2014.IMAX.mp4","Cooper communicates across time through gravity","2024-01-12T16:43:11.234Z","sci-fi;time;gravity;communication;climax"`}
        </pre>
      </div>
    </div>
    
    <Callout type="info" title="CSV Configuration">
      CSV exports are **highly customizable** with field selection, delimiter choice, and encoding options to match your target application requirements.
    </Callout>
  </Tab>
  
  <Tab value="Advanced Options">
    ### Advanced Export Configuration
    
    Comprehensive export options for enterprise requirements:
    
    ```typescript
    interface AdvancedExportOptions {
      // Format and structure
      format: 'json' | 'csv';
      includeMetadata: boolean;
      compressOutput?: boolean;          // GZIP compression
      filePath?: string;                 // Custom output path
      
      // Filtering and selection
      filter?: {
        tags?: string[];                 // Include only specific tags
        dateRange?: {                    // Date range filtering
          start: string;
          end: string;
        };
        mediaType?: string;              // Filter by media type
        bookmarkIds?: string[];          // Specific bookmark selection
      };
      
      // CSV-specific options
      csvOptions?: {
        selectedFields: string[];        // Column selection
        delimiter: ',' | ';' | '\t';    // Field separator
        includeHeaders: boolean;         // Header row
        quoteStyle: 'minimal' | 'all';  // Quoting strategy
        nullValue: string;               // Null representation
      };
      
      // Performance options
      batchSize?: number;                // Processing batch size
      progressCallback?: (progress: number) => void;
    }
    ```
    
    <div className="space-y-4">
      <div className="p-4 border rounded-lg">
        <h4 className="font-semibold mb-2">üéØ Filtering Examples</h4>
        
        <Tabs items={['By Tags', 'By Date', 'By Media Type', 'Combined']}>
          <Tab value="By Tags">
            ```typescript
            // Export only bookmarks with specific tags
            const tagFilteredExport = await exportBookmarks({
              format: 'json',
              includeMetadata: true,
              filter: {
                tags: ['favorite', 'study-material', 'important']
              }
            });
            ```
          </Tab>
          
          <Tab value="By Date">
            ```typescript
            // Export bookmarks from specific date range
            const dateFilteredExport = await exportBookmarks({
              format: 'csv',
              includeMetadata: false,
              filter: {
                dateRange: {
                  start: '2024-01-01T00:00:00Z',
                  end: '2024-01-31T23:59:59Z'
                }
              }
            });
            ```
          </Tab>
          
          <Tab value="By Media Type">
            ```typescript
            // Export only movie bookmarks
            const mediaFilteredExport = await exportBookmarks({
              format: 'json',
              includeMetadata: true,
              filter: {
                mediaType: 'movie' // 'movie', 'tv', 'documentary', etc.
              }
            });
            ```
          </Tab>
          
          <Tab value="Combined">
            ```typescript
            // Complex combined filtering
            const complexFilteredExport = await exportBookmarks({
              format: 'csv',
              includeMetadata: true,
              filter: {
                tags: ['educational', 'reference'],
                dateRange: {
                  start: '2023-01-01T00:00:00Z',
                  end: '2024-12-31T23:59:59Z'
                },
                mediaType: 'documentary'
              },
              csvOptions: {
                selectedFields: ['title', 'timestamp', 'description', 'tags'],
                delimiter: '\t',
                includeHeaders: true
              }
            });
            ```
          </Tab>
        </Tabs>
      </div>
    </div>
    
    <Callout type="warning" title="Performance Considerations">
      Large exports (>1000 bookmarks) use **batch processing** to maintain UI responsiveness. Progress callbacks provide real-time status updates.
    </Callout>
  </Tab>
  
  <Tab value="Batch Processing">
    ### High-Performance Batch Export
    
    Optimized processing for large bookmark collections:
    
    ```typescript
    interface BatchExportResult {
      success: boolean;
      totalProcessed: number;
      batchCount: number;
      processingTimeMs: number;
      filePath?: string;
      error?: string;
    }
    
    // Large-scale export with progress tracking
    const batchExport = await bookmarkManager.exportBatch({
      format: 'json',
      batchSize: 100,                    // Process 100 bookmarks per batch
      compressionLevel: 6,               // GZIP compression level
      progressCallback: (progress) => {
        console.log(`Export progress: ${progress.toFixed(1)}%`);
        updateProgressBar(progress);
      },
      errorCallback: (error, batchIndex) => {
        console.error(`Batch ${batchIndex} failed:`, error);
      }
    });
    ```
    
    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-4">
      <div className="p-4 border rounded-lg">
        <h4 className="font-semibold mb-2">üöÄ Performance Features</h4>
        <ul className="text-sm space-y-1">
          <li>‚Ä¢ **Chunked processing** - Prevents memory overflow</li>
          <li>‚Ä¢ **Progress tracking** - Real-time status updates</li>
          <li>‚Ä¢ **Error recovery** - Continue on non-critical errors</li>
          <li>‚Ä¢ **Compression** - Reduce output file size</li>
          <li>‚Ä¢ **Cancellation** - User can abort long operations</li>
        </ul>
      </div>
      
      <div className="p-4 border rounded-lg">
        <h4 className="font-semibold mb-2">üìä Performance Metrics</h4>
        <ul className="text-sm space-y-1">
          <li>‚Ä¢ **Throughput**: ~500 bookmarks/second</li>
          <li>‚Ä¢ **Memory usage**: &lt;50MB for 10k bookmarks</li>
          <li>‚Ä¢ **Compression ratio**: 70-80% size reduction</li>
          <li>‚Ä¢ **Error rate**: &lt;0.1% for valid data</li>
          <li>‚Ä¢ **Cancellation time**: &lt;100ms response</li>
        </ul>
      </div>
    </div>
    
    <Callout type="tip" title="Batch Size Optimization">
      **Recommended batch sizes**: 50-100 for JSON exports, 200-500 for CSV exports. Larger batches improve throughput but increase memory usage.
    </Callout>
  </Tab>
</Tabs>

## üì• Import System

<Tabs items={['JSON Import', 'CSV Import', 'Validation', 'Error Handling']}>
  <Tab value="JSON Import">
    ### JSON Import Processing
    
    Import bookmarks from JSON files with comprehensive validation:
    
    ```typescript
    interface ImportOptions {
      duplicateHandling: 'skip' | 'replace' | 'merge';
      validateData: boolean;              // Enable comprehensive validation
      preserveIds: boolean;               // Keep original IDs or regenerate
      batchSize?: number;                 // Import batch size
      progressCallback?: (progress: number) => void;
    }
    
    interface ImportResult {
      success: boolean;
      importedCount: number;              // Successfully imported bookmarks
      skippedCount: number;               // Skipped due to duplicates
      errorCount: number;                 // Failed imports
      errors?: string[];                  // Detailed error messages
      duplicates?: number;                // Detected duplicates
      processingTimeMs?: number;          // Import duration
    }
    ```
    
    <div className="space-y-4">
      <div className="p-4 border rounded-lg">
        <h4 className="font-semibold mb-2">üîç JSON Validation Pipeline</h4>
        
        <Steps>
          <Step>
            ### Schema Validation
            
            Validates JSON structure and required fields:
            ```typescript
            const validationChecks = {
              schemaVersion: validateSchemaVersion(data.metadata?.version),
              requiredFields: validateRequiredFields(data.bookmarks),
              dataTypes: validateDataTypes(data.bookmarks),
              constraints: validateConstraints(data.bookmarks)
            };
            ```
          </Step>
          
          <Step>
            ### Data Integrity Checks
            
            Verifies bookmark data consistency:
            - **Unique IDs**: Ensures no duplicate identifiers
            - **Valid timestamps**: Checks timestamp ranges and formats
            - **File path validation**: Verifies file accessibility
            - **Tag consistency**: Validates tag format and limits
          </Step>
          
          <Step>
            ### Duplicate Detection
            
            Sophisticated duplicate identification:
            ```typescript
            interface DuplicateDetection {
              exactMatch: boolean;          // Identical ID or content
              similarMatch: boolean;        // Similar title/timestamp
              conflictResolution: 'skip' | 'replace' | 'merge';
            }
            ```
          </Step>
        </Steps>
      </div>
      
      <div className="p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded">
        <h5 className="font-semibold mb-2 text-green-800 dark:text-green-200">‚úÖ Successful Import Example</h5>
        <pre className="text-xs text-green-700 dark:text-green-300">
{`Import Result:
{
  "success": true,
  "importedCount": 23,
  "skippedCount": 2,
  "errorCount": 0,
  "duplicates": 2,
  "processingTimeMs": 245.7
}

Summary: 23 bookmarks imported successfully
- 2 duplicates skipped (based on duplicate handling setting)
- 0 errors encountered
- Processing completed in 245.7ms`}
        </pre>
      </div>
    </div>
    
    <Callout type="info" title="Version Compatibility">
      The import system supports **backward compatibility** with older export formats and **automatic schema migration** for seamless upgrades.
    </Callout>
  </Tab>
  
  <Tab value="CSV Import">
    ### CSV Import Processing
    
    Import from CSV files with intelligent field mapping:
    
    ```typescript
    interface CSVImportOptions extends ImportOptions {
      fieldMapping?: Record<string, string>;    // Map CSV columns to bookmark fields
      delimiter?: ',' | ';' | '\t';            // CSV delimiter detection/override
      hasHeaders?: boolean;                     // Header row presence
      encoding?: 'utf-8' | 'latin1' | 'ascii'; // File encoding
      skipEmptyRows?: boolean;                  // Handle empty rows
    }
    ```
    
    <div className="space-y-4">
      <div className="p-4 border rounded-lg">
        <h4 className="font-semibold mb-2">üó∫Ô∏è Automatic Field Mapping</h4>
        
        The system intelligently maps CSV columns to bookmark fields:
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-3">
          <div>
            <h5 className="font-medium mb-2">Recognized Headers</h5>
            <ul className="text-sm space-y-1">
              <li>‚Ä¢ **Title**: title, name, bookmark_title</li>
              <li>‚Ä¢ **Timestamp**: timestamp, time, position, seconds</li>
              <li>‚Ä¢ **File Path**: filepath, file, path, location</li>
              <li>‚Ä¢ **Description**: description, notes, comment</li>
              <li>‚Ä¢ **Tags**: tags, categories, labels</li>
              <li>‚Ä¢ **Created**: created, date, timestamp_created</li>
            </ul>
          </div>
          <div>
            <h5 className="font-medium mb-2">Format Conversion</h5>
            <ul className="text-sm space-y-1">
              <li>‚Ä¢ **Time formats**: HH:MM:SS ‚Üí seconds</li>
              <li>‚Ä¢ **Tag lists**: "tag1;tag2;tag3" ‚Üí array</li>
              <li>‚Ä¢ **Dates**: Various formats ‚Üí ISO 8601</li>
              <li>‚Ä¢ **Paths**: Relative ‚Üí absolute paths</li>
              <li>‚Ä¢ **Encoding**: Auto-detect and convert</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div className="p-4 bg-gray-50 dark:bg-gray-900 rounded-lg">
        <h5 className="font-semibold mb-2">CSV Import Example</h5>
        
        <Tabs items={['Input CSV', 'Field Mapping', 'Result']}>
          <Tab value="Input CSV">
            ```csv
            Title,Time,File Location,Notes,Categories
            "Inception Dream Scene","00:57:00","/Movies/Inception.mp4","Multi-layer dream explanation","sci-fi;favorite;plot"
            "Matrix Red Pill","30:47","/Movies/Matrix.mp4","Choice between realities","sci-fi;philosophy;pivotal"
            ```
          </Tab>
          
          <Tab value="Field Mapping">
            ```typescript
            // Automatic field mapping detection
            const mapping = {
              "Title": "title",
              "Time": "timestamp",        // Converts HH:MM:SS to seconds
              "File Location": "filepath",
              "Notes": "description",
              "Categories": "tags"        // Splits on semicolon
            };
            ```
          </Tab>
          
          <Tab value="Result">
            ```json
            [
              {
                "id": "bookmark_generated_001",
                "title": "Inception Dream Scene",
                "timestamp": 3420.0,
                "filepath": "/Movies/Inception.mp4",
                "description": "Multi-layer dream explanation",
                "tags": ["sci-fi", "favorite", "plot"],
                "createdAt": "2024-01-15T10:30:45.123Z"
              }
            ]
            ```
          </Tab>
        </Tabs>
      </div>
    </div>
    
    <Callout type="tip" title="CSV Best Practices">
      For best results, use **descriptive column headers** and **consistent formatting**. The system can handle various delimiters and encodings automatically.
    </Callout>
  </Tab>
  
  <Tab value="Validation">
    ### Comprehensive Data Validation
    
    Multi-layer validation ensures data quality and system stability:
    
    ```typescript
    interface ValidationPipeline {
      // File-level validation
      validateFileFormat(content: string): ValidationResult;
      validateEncoding(content: string): ValidationResult;
      validateSize(content: string): ValidationResult;
      
      // Structure validation
      validateSchema(data: any): ValidationResult;
      validateFields(bookmarks: any[]): ValidationResult;
      validateConsistency(bookmarks: BookmarkData[]): ValidationResult;
      
      // Business logic validation
      validateDuplicates(bookmarks: BookmarkData[]): ValidationResult;
      validateReferences(bookmarks: BookmarkData[]): ValidationResult;
      validateConstraints(bookmarks: BookmarkData[]): ValidationResult;
    }
    ```
    
    <div className="space-y-4">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div className="p-4 border rounded-lg">
          <h4 className="font-semibold mb-2">‚úÖ Validation Passes</h4>
          <ul className="text-sm space-y-1">
            <li>‚Ä¢ **Schema compliance** - Correct data structure</li>
            <li>‚Ä¢ **Required fields** - All mandatory data present</li>
            <li>‚Ä¢ **Data types** - Correct type for each field</li>
            <li>‚Ä¢ **Value ranges** - Timestamps within media duration</li>
            <li>‚Ä¢ **File references** - Valid file paths</li>
            <li>‚Ä¢ **Uniqueness** - No duplicate IDs</li>
          </ul>
        </div>
        
        <div className="p-4 border rounded-lg">
          <h4 className="font-semibold mb-2">‚ö†Ô∏è Common Issues</h4>
          <ul className="text-sm space-y-1">
            <li>‚Ä¢ **Missing fields** - Required data not provided</li>
            <li>‚Ä¢ **Invalid timestamps** - Negative or excessive values</li>
            <li>‚Ä¢ **Malformed tags** - Invalid characters or format</li>
            <li>‚Ä¢ **Encoding issues** - Character set problems</li>
            <li>‚Ä¢ **Path problems** - Inaccessible file locations</li>
            <li>‚Ä¢ **Duplicate conflicts** - ID or content collisions</li>
          </ul>
        </div>
      </div>
      
      <div className="p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded">
        <h5 className="font-semibold mb-2 text-yellow-800 dark:text-yellow-200">‚ö†Ô∏è Validation Warning Example</h5>
        <pre className="text-xs text-yellow-700 dark:text-yellow-300">
{`Validation completed with warnings:
{
  "success": true,
  "importedCount": 18,
  "skippedCount": 3,
  "errorCount": 2,
  "warnings": [
    "Line 5: Timestamp 7200 exceeds media duration (6800s) - adjusted",
    "Line 12: Invalid characters in tag 'sci-fi!' - cleaned to 'sci-fi'",
    "Line 18: Missing description field - using empty string"
  ],
  "errors": [
    "Line 8: Required field 'title' is empty - bookmark skipped",
    "Line 21: Invalid timestamp '-30' - bookmark skipped"
  ]
}`}
        </pre>
      </div>
    </div>
  </Tab>
  
  <Tab value="Error Handling">
    ### Robust Error Handling
    
    Comprehensive error recovery and reporting system:
    
    ```typescript
    interface ErrorHandling {
      // Error categories
      criticalErrors: string[];    // Stop import immediately
      recoverableErrors: string[]; // Skip item, continue import
      warnings: string[];          // Import with modifications
      
      // Recovery strategies
      autoCorrection: boolean;     // Attempt automatic fixes
      skipOnError: boolean;        // Continue despite errors
      rollbackOnFailure: boolean; // Undo partial imports
      
      // Reporting
      detailedLog: boolean;        // Full error context
      progressTracking: boolean;   // Real-time status updates
    }
    ```
    
    <div className="space-y-4">
      <div className="p-4 border rounded-lg">
        <h4 className="font-semibold mb-2">üîß Error Recovery Strategies</h4>
        
        <Tabs items={['Auto-Correction', 'Graceful Degradation', 'User Intervention']}>
          <Tab value="Auto-Correction">
            **Automatic fixes for common issues:**
            
            ```typescript
            const corrections = {
              // Timestamp normalization
              negativeTimestamp: (ts) => Math.max(0, ts),
              excessiveTimestamp: (ts, max) => Math.min(ts, max),
              
              // Title cleanup
              emptyTitle: (filepath) => extractTitleFromPath(filepath),
              invalidChars: (title) => title.replace(/[^\w\s-]/g, ''),
              
              // Tag normalization
              invalidTags: (tags) => tags.filter(isValidTag).map(cleanTag),
              duplicateTags: (tags) => [...new Set(tags)],
              
              // Path resolution
              relativePaths: (path, basePath) => resolve(basePath, path),
              missingFiles: (path) => findSimilarFile(path)
            };
            ```
          </Tab>
          
          <Tab value="Graceful Degradation">
            **Continue import with reduced functionality:**
            
            ```typescript
            const degradationStrategies = {
              // Partial data acceptance
              missingOptionalFields: 'useDefaults',
              invalidOptionalData: 'omitField',
              
              // Fallback behaviors
              unreadableFiles: 'markAsUnavailable',
              invalidTimestamps: 'useMediaStart',
              malformedTags: 'convertToString',
              
              // Quality preservation
              maintainStructure: true,
              preserveOriginalData: true,
              logAllChanges: true
            };
            ```
          </Tab>
          
          <Tab value="User Intervention">
            **Interactive error resolution:**
            
            ```typescript
            interface UserInterventionOptions {
              // Prompt for decisions
              duplicateResolution: 'prompt' | 'auto';
              pathResolution: 'prompt' | 'skip';
              validationFailures: 'prompt' | 'fix';
              
              // Batch operations
              applyToAll: boolean;
              rememberChoices: boolean;
              
              // Preview and confirmation
              showPreview: boolean;
              requireConfirmation: boolean;
            }
            ```
          </Tab>
        </Tabs>
      </div>
      
      <div className="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded">
        <h5 className="font-semibold mb-2 text-red-800 dark:text-red-200">‚ùå Critical Error Example</h5>
        <pre className="text-xs text-red-700 dark:text-red-300">
{`Import failed with critical errors:
{
  "success": false,
  "importedCount": 0,
  "errorCount": 1,
  "errors": [
    "File format validation failed: Invalid JSON structure at line 15, column 32",
    "Critical schema mismatch: Required field 'bookmarks' not found in root object"
  ],
  "recommendation": "Please verify the file format and try again with a valid bookmark export file"
}`}
        </pre>
      </div>
    </div>
    
    <Callout type="warning" title="Error Recovery">
      The system employs **progressive error handling** - attempting auto-correction first, then graceful degradation, and finally user intervention for critical issues.
    </Callout>
  </Tab>
</Tabs>

## Export Functionality

### Supported Export Formats

The plugin supports multiple export formats:

- **JSON** - Full data with all metadata
- **CSV** - Spreadsheet-compatible format
- **XML** - Structured markup format (planned)

### Exporting Bookmarks

<Steps>
  <Step>
    ### Open Export Dialog
    
    - Click "Export" button in the standalone window
    - Or use the plugin menu: "Export Bookmarks"
  </Step>
  
  <Step>
    ### Choose Format
    
    Select your preferred export format:
    - **JSON** for full data preservation
    - **CSV** for spreadsheet applications
  </Step>
  
  <Step>
    ### Configure Options
    
    - **All bookmarks** or **selected bookmarks** only
    - **Include descriptions** and tags
    - **Date range** filtering
  </Step>
  
  <Step>
    ### Save File
    
    Choose location and filename for your export
  </Step>
</Steps>

### JSON Export Format

```json
{
  "version": "1.0",
  "exportDate": "2024-01-01T12:00:00Z",
  "bookmarks": [
    {
      "id": "bookmark-123",
      "title": "Epic Scene",
      "timestamp": 1847.5,
      "filePath": "/Movies/Great.Movie.2023.mp4",
      "description": "Amazing action sequence",
      "tags": ["action", "favorite"],
      "createdAt": "2024-01-01T10:30:00Z",
      "updatedAt": "2024-01-01T10:30:00Z"
    }
  ]
}
```

### CSV Export Format

| Title | Timestamp | File Path | Description | Tags | Created |
|-------|-----------|-----------|-------------|------|---------|
| Epic Scene | 1847.5 | /Movies/Great.Movie.2023.mp4 | Amazing action sequence | action,favorite | 2024-01-01 10:30:00 |

## Import Functionality

### Supported Import Sources

- **JSON files** exported from this plugin
- **CSV files** with proper column headers
- **Legacy bookmark formats** (planned)
- **Other media players** (planned)

### Importing Bookmarks

<Steps>
  <Step>
    ### Open Import Dialog
    
    - Click "Import" button in the standalone window
    - Or use the plugin menu: "Import Bookmarks"
  </Step>
  
  <Step>
    ### Select File
    
    Choose the file containing your bookmark data
  </Step>
  
  <Step>
    ### Configure Import
    
    - **Merge** with existing bookmarks or **replace** all
    - **Duplicate handling** strategy
    - **Field mapping** for CSV files
  </Step>
  
  <Step>
    ### Review and Import
    
    Preview the data and confirm the import
  </Step>
</Steps>

### Import Options

#### Duplicate Handling

When importing bookmarks that might duplicate existing ones:

- **Skip duplicates** - Keep existing bookmarks
- **Update existing** - Overwrite with imported data
- **Keep both** - Allow duplicates with different IDs
- **Ask for each** - Manual decision for each duplicate

#### Field Mapping (CSV)

Map CSV columns to bookmark fields:

```
CSV Column    ‚Üí    Bookmark Field
Title         ‚Üí    title
Time          ‚Üí    timestamp  
Path          ‚Üí    filePath
Notes         ‚Üí    description
Categories    ‚Üí    tags
```

## Data Migration

### Upgrading Data Format

The plugin automatically handles data format upgrades:

1. **Backup creation** before migration
2. **Format conversion** to new schema
3. **Validation** of migrated data
4. **Rollback** option if issues occur

### Cross-Platform Compatibility

Bookmarks can be transferred between different systems:

- **Path normalization** for different file systems
- **Relative path conversion** when possible
- **Missing file detection** and reporting

## Backup and Recovery

### Automatic Backups

The plugin automatically creates backups:

- **Daily backups** of all bookmark data
- **Pre-operation backups** before major changes
- **Backup rotation** (keeps last 7 days)
- **Manual backup** option available

### Backup Location

Backups are stored in:

```
~/.config/iina/plugins/bookmarks/backups/
‚îú‚îÄ‚îÄ daily/
‚îÇ   ‚îú‚îÄ‚îÄ bookmarks-2024-01-01.json
‚îÇ   ‚îú‚îÄ‚îÄ bookmarks-2024-01-02.json
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ manual/
    ‚îî‚îÄ‚îÄ user-backup-2024-01-01.json
```

### Recovery Process

To restore from backup:

<Steps>
  <Step>
    ### Access Recovery
    
    - Settings ‚Üí Data Management ‚Üí Restore from Backup
    - Or manually copy backup file to data directory
  </Step>
  
  <Step>
    ### Select Backup
    
    Choose from available automatic or manual backups
  </Step>
  
  <Step>
    ### Confirm Restore
    
    Review backup contents and confirm restoration
  </Step>
</Steps>

<Callout type="warning">
  Restoring from backup will replace all current bookmark data. Create a manual backup first if you want to preserve recent changes.
</Callout>

## Data Security

### Privacy Protection

- **Local storage only** - No cloud synchronization by default
- **No external services** - All processing happens locally
- **File permissions** - Restricted access to bookmark files

### Data Validation

All imported data is validated:

- **Schema validation** - Ensures proper data structure
- **Type checking** - Validates data types
- **Sanitization** - Removes potentially harmful content
- **Integrity checks** - Verifies data consistency

## Advanced Data Operations

### Bulk Operations

Perform operations on multiple bookmarks:

```typescript
// Example: Export bookmarks by tag
const actionBookmarks = bookmarks.filter(b => 
  b.tags.includes('action')
);
await exportBookmarks(actionBookmarks, 'json');
```

### Data Analysis

The plugin can provide insights about your bookmarks:

- **Most bookmarked media** files
- **Tag usage statistics** 
- **Bookmark frequency** over time
- **Average timestamp** positions

### Scripting Support

For advanced users, the plugin supports scripting:

```javascript
// Export all bookmarks from last month
const lastMonth = new Date();
lastMonth.setMonth(lastMonth.getMonth() - 1);

const recentBookmarks = bookmarks.filter(b => 
  new Date(b.createdAt) > lastMonth
);

await exportBookmarks(recentBookmarks, 'csv');
```

## Troubleshooting

### Common Import Issues

| Issue | Solution |
|-------|----------|
| "Invalid file format" | Ensure file is valid JSON/CSV |
| "Missing required fields" | Check column headers in CSV |
| "Duplicate bookmarks" | Choose duplicate handling strategy |
| "Large file timeout" | Split large files into smaller chunks |

### Export Problems

| Issue | Solution |
|-------|----------|
| "Export failed" | Check available disk space |
| "Permission denied" | Verify write permissions |
| "Empty export" | Ensure bookmarks are selected |
| "Corrupted file" | Try different export format |

<Callout type="info">
  For persistent data issues, check the plugin logs in the IINA console or create a support ticket with relevant error messages.
</Callout>

## Best Practices

### Regular Backups

- **Enable automatic backups** in settings
- **Create manual backups** before major changes
- **Test restore process** periodically
- **Store backups** in multiple locations

### Data Organization

- **Use consistent tagging** for better organization
- **Clean up unused tags** periodically
- **Review and update** bookmark descriptions
- **Remove outdated** bookmarks regularly

### Performance Tips

- **Export in batches** for large collections
- **Use appropriate formats** for your use case
- **Monitor file sizes** to prevent performance issues
- **Clean up backup files** when no longer needed 